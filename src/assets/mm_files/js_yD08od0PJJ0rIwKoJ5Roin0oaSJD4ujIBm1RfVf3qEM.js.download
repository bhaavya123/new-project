/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t="undefined"!=typeof globalThis?globalThis:t||self,function(){var n=t.tabbable,o=t.tabbable={};e(o),o.noConflict=function(){return t.tabbable=n,o}}())}(this,(function(t){"use strict";var e=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],n=e.join(","),o="undefined"==typeof Element,r=o?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,i=!o&&Element.prototype.getRootNode?function(t){var e;return null==t||null===(e=t.getRootNode)||void 0===e?void 0:e.call(t)}:function(t){return null==t?void 0:t.ownerDocument},a=function t(e,n){var o;void 0===n&&(n=!0);var r=null==e||null===(o=e.getAttribute)||void 0===o?void 0:o.call(e,"inert");return""===r||"true"===r||n&&e&&t(e.parentNode)},l=function(t,e,o){if(a(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(n));return e&&r.call(t,n)&&i.unshift(t),i=i.filter(o)},u=function t(e,o,i){for(var l=[],u=Array.from(e);u.length;){var d=u.shift();if(!a(d,!1))if("SLOT"===d.tagName){var c=d.assignedElements(),f=t(c.length?c:d.children,!0,i);i.flatten?l.push.apply(l,f):l.push({scopeParent:d,candidates:f})}else{r.call(d,n)&&i.filter(d)&&(o||!e.includes(d))&&l.push(d);var s=d.shadowRoot||"function"==typeof i.getShadowRoot&&i.getShadowRoot(d),p=!a(s,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(d));if(s&&p){var h=t(!0===s?d.children:s.children,!0,i);i.flatten?l.push.apply(l,h):l.push({scopeParent:d,candidates:h})}else u.unshift.apply(u,d.children)}}return l},d=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},c=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||function(t){var e,n=null==t||null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"contenteditable");return""===n||"true"===n}(t))&&!d(t)?0:t.tabIndex},f=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},s=function(t){return"INPUT"===t.tagName},p=function(t){return function(t){return s(t)&&"radio"===t.type}(t)&&!function(t){if(!t.name)return!0;var e,n=t.form||i(t),o=function(t){return n.querySelectorAll('input[type="radio"][name="'+t+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)e=o(window.CSS.escape(t.name));else try{e=o(t.name)}catch(t){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",t.message),!1}var r=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]}(e,t.form);return!r||r===t}(t)},h=function(t){var e=t.getBoundingClientRect(),n=e.width,o=e.height;return 0===n&&0===o},v=function(t,e){var n=e.displayCheck,o=e.getShadowRoot;if("hidden"===getComputedStyle(t).visibility)return!0;var a=r.call(t,"details>summary:first-of-type")?t.parentElement:t;if(r.call(a,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return h(t)}else{if("function"==typeof o){for(var l=t;t;){var u=t.parentElement,d=i(t);if(u&&!u.shadowRoot&&!0===o(u))return h(t);t=t.assignedSlot?t.assignedSlot:u||d===t.ownerDocument?u:d.host}t=l}if(function(t){var e,n,o,r,a=t&&i(t),l=null===(e=a)||void 0===e?void 0:e.host,u=!1;if(a&&a!==t)for(u=!!(null!==(n=l)&&void 0!==n&&null!==(o=n.ownerDocument)&&void 0!==o&&o.contains(l)||null!=t&&null!==(r=t.ownerDocument)&&void 0!==r&&r.contains(t));!u&&l;){var d,c,f;u=!(null===(c=l=null===(d=a=i(l))||void 0===d?void 0:d.host)||void 0===c||null===(f=c.ownerDocument)||void 0===f||!f.contains(l))}return u}(t))return!t.getClientRects().length;if("legacy-full"!==n)return!0}return!1},b=function(t,e){return!(e.disabled||a(e)||function(t){return s(t)&&"hidden"===t.type}(e)||v(e,t)||function(t){return"DETAILS"===t.tagName&&Array.prototype.slice.apply(t.children).some((function(t){return"SUMMARY"===t.tagName}))}(e)||function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if("FIELDSET"===e.tagName&&e.disabled){for(var n=0;n<e.children.length;n++){var o=e.children.item(n);if("LEGEND"===o.tagName)return!!r.call(e,"fieldset[disabled] *")||!o.contains(t)}return!0}e=e.parentElement}return!1}(e))},m=function(t,e){return!(p(e)||c(e)<0||!b(t,e))},g=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},y=function t(e){var n=[],o=[];return e.forEach((function(e,r){var i=!!e.scopeParent,a=i?e.scopeParent:e,l=function(t,e){var n=c(t);return n<0&&e&&!d(t)?0:n}(a,i),u=i?t(e.candidates):a;0===l?i?n.push.apply(n,u):n.push(a):o.push({documentOrder:r,tabIndex:l,item:e,isScope:i,content:u})})),o.sort(f).reduce((function(t,e){return e.isScope?t.push.apply(t,e.content):t.push(e.content),t}),[]).concat(n)},w=e.concat("iframe").join(",");t.focusable=function(t,e){return(e=e||{}).getShadowRoot?u([t],e.includeContainer,{filter:b.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):l(t,e.includeContainer,b.bind(null,e))},t.getTabIndex=c,t.isFocusable=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==r.call(t,w)&&b(e,t)},t.isTabbable=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==r.call(t,n)&&m(e,t)},t.tabbable=function(t,e){var n;return n=(e=e||{}).getShadowRoot?u([t],e.includeContainer,{filter:m.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:g}):l(t,e.includeContainer,m.bind(null,e)),y(n)},Object.defineProperty(t,"__esModule",{value:!0})}));;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).bodyScrollLock={})}(this,(function(e){"use strict";var t=function(){return"undefined"==typeof window},o=function(e){e=e||navigator.userAgent;var t=/(iPad).*OS\s([\d_]+)/.test(e);return{ios:!t&&/(iPhone\sOS)\s([\d_]+)/.test(e)||t,android:/(Android);?[\s/]+([\d.]+)?/.test(e)}};var n=0,i=0,r=0,s=null,l=!1,c=[],d=function(e){if(t())return!1;if(!e)throw new Error("options must be provided");var o=!1,n={get passive(){o=!0}},i=function(){},r="__TUA_BSL_TEST_PASSIVE__";window.addEventListener(r,i,n),window.removeEventListener(r,i,n);var s=e.capture;return o?e:void 0!==s&&s}({passive:!1}),u=!t()&&"scrollBehavior"in document.documentElement.style,f=function(e){e.cancelable&&e.preventDefault()};e.clearBodyLocks=function(){if(!t())if(n=0,o().ios||"function"!=typeof s){if(c.length)for(var e=c.pop();e;)e.ontouchmove=null,e.ontouchstart=null,e=c.pop();l&&(document.removeEventListener("touchmove",f,d),l=!1)}else s()},e.lock=function(e,a){if(!t()){if(o().ios){if(e)(Array.isArray(e)?e:[e]).forEach((function(e){e&&-1===c.indexOf(e)&&(e.ontouchstart=function(e){i=e.targetTouches[0].clientY,r=e.targetTouches[0].clientX},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){if(t){var o=t.scrollTop,n=t.scrollLeft,s=t.scrollWidth,l=t.scrollHeight,c=t.clientWidth,d=t.clientHeight,u=e.targetTouches[0].clientX-r,a=e.targetTouches[0].clientY-i,h=Math.abs(a)>Math.abs(u);if(h&&(a>0&&0===o||a<0&&o+d+1>=l)||!h&&(u>0&&0===n||u<0&&n+c+1>=s))return f(e)}e.stopPropagation()}(t,e)},c.push(e))}));l||(document.addEventListener("touchmove",f,d),l=!0)}else n<=0&&(s=o().android?function(e){var t=document.documentElement,o=document.body,n=t.scrollTop||o.scrollTop,i=Object.assign({},t.style),r=Object.assign({},o.style);return t.style.height="100%",t.style.overflow="hidden",o.style.top="-".concat(n,"px"),o.style.width="100%",o.style.height="auto",o.style.position="fixed",o.style.overflow=(null==e?void 0:e.overflowType)||"hidden",function(){t.style.height=i.height||"",t.style.overflow=i.overflow||"",["top","width","height","overflow","position"].forEach((function(e){o.style[e]=r[e]||""}));var e={top:n,behavior:"instant"};u?window.scrollTo(e):window.scrollTo(0,n)}}(a):(h=document.documentElement,v=Object.assign({},h.style),p=window.innerWidth-h.clientWidth,y=parseInt(window.getComputedStyle(h).paddingRight,10),h.style.overflow="hidden",h.style.boxSizing="border-box",h.style.paddingRight="".concat(p+y,"px"),function(){["overflow","boxSizing","paddingRight"].forEach((function(e){h.style[e]=v[e]||""}))}));var h,v,p,y;n+=1}},e.unlock=function(e){if(!(t()||(n-=1)>0))if(o().ios||"function"!=typeof s){if(e)(Array.isArray(e)?e:[e]).forEach((function(e){var t=c.indexOf(e);-1!==t&&(e.ontouchmove=null,e.ontouchstart=null,c.splice(t,1))}));l&&(document.removeEventListener("touchmove",f,d),l=!1)}else s()}}));;(function(Drupal){'use strict';Drupal.behaviors.addToAny={attach:function(context,settings){if(context!==document&&window.a2a)a2a.init_all();}};})(Drupal);;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.Cookies,o=e.Cookies=t();o.noConflict=function(){return e.Cookies=n,o;};}());}(this,(function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o];}return e;}var t=function t(n,o){function r(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+n.write(r,t)+c;}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],o={},r=0;r<t.length;r++){var i=t[r].split("="),c=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(o[u]=n.read(c,u),e===u)break;}catch(e){}}return e?o[e]:o;}},remove:function(t,n){r(t,"",e({},n,{expires:-1}));},withAttributes:function(n){return t(this.converter,e({},this.attributes,n));},withConverter:function(n){return t(e({},this.converter,n),this.attributes);}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(n)}});}({read:function(e){return '"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent);}},{path:"/"});return t;}));;let userFiboId;let userFiboName;let userFiboEmail;var StopSubmission=false;var allBranchesData=[];var feedbackQuestions=[];var cityOptions="";var restaurantOptions="";var APIformData=[];var FormValidationSuccess=false;let FeedbackApiTriggered=false;function testEmailFormat(email){if(/^([a-z0-9_\.-]+\@[\da-z\.-]+\.[a-z\.]{2,6})$/.test(email))return true;else return false;}function testMobileFormat(mobile){if(/^[6-9]\d{9}$/.test(mobile))return true;else return false;}(function($,Drupal,once){Drupal.behaviors.bbqCommon={attach:function(context,settings){userFiboId=settings.user.uid;$(document).ready(function(){function loaderStop(){$('.fakeLoader').removeClass('display-block');$('.fakeLoader').addClass('hide');}function loaderStart(){$('.fakeLoader').removeClass('hide');$('.fakeLoader').addClass('display-block');}if(userFiboId){if(userFiboId!=1)$.ajax({method:'GET',url:'/api/v1/user',headers:getHeaders(),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},success:function(data){Moengage.add_unique_user_id(data.mobile_number);Moengage.add_mobile(data.mobile_number);Moengage.add_email(data.email);var obj={userId:userFiboId,name:data.name,email:data.email};if(window.fibo)window.fibo.login(obj);else window.fibotalkSettings=obj;}});}else{var obj={userId:'',name:'Anonymous User',email:''};if(window.fibo)window.fibo.login(obj);else window.fibotalkSettings=obj;}if(jQuery('form.webform-submission-feedback-form').length>0){jQuery('input.feedback-subject-field').val('');jQuery('input.feedback-subject-field').hide();if(jQuery('#feedback_subject_select').length==0)jQuery('.feedback-subject-wrapper').append('<select id="feedback_subject_select" required="required" class="feedback-subject-select " title="Please select a feedback subject" ><option value="">- Select -</option></select>');jQuery(".restaurant-select").children().remove();jQuery(".restaurant-select").append('<option value="" selected="selected">- Select -</option>');jQuery(".city-select").children().remove();jQuery(".city-select").append('<option value="" selected="selected">- Select -</option>');$("#edit-mobile-no-").keypress(function(e){var pressedKey=e.which;if(pressedKey<48||pressedKey>57)e.preventDefault();if(this.value.length>=10)e.preventDefault();});$.ajax({method:"GET",url:"/api/v1/delivery/feedback-question",headers:getHeaders(),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},success:function(data){if(data.message_type=="success"){feedbackQuestions=data.feedBackQuestionMaster;var feedbackSubjectSelect='<option value="">- Select -</option>';feedbackQuestions.forEach((element)=>{feedbackSubjectSelect+='<option value='+element.feed_back_question_id+'>'+element.feed_back_question+'</option>';});jQuery('.feedback-subject-select').children().remove();jQuery('.feedback-subject-select').append(feedbackSubjectSelect);jQuery('select#feedback_subject_select').on('change',function(e){let feedbackQuestion=this.value;if(feedbackQuestion.length!=0)feedbackQuestions.forEach((element)=>{if(feedbackQuestion==element.feed_back_question_id)jQuery('input.feedback-subject-field').val(element.feed_back_question);});else jQuery('input.feedback-subject-field').val("");});}}});$.ajax({method:'GET',url:'/api/v1/get-all-branches',headers:getHeaders(),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},success:function(data){allBranchesData=data.data;if(jQuery(".city-select").length>0){cityOptions='<option value="" selected="selected">- Select -</option>';var preRestaurantOptions='<option value="" selected="selected">- Select -</option>';allBranchesData.forEach((element)=>{cityOptions+="<option value="+element.city_id+">"+element.city_name+"</option>";});jQuery(".city-select").children().remove();jQuery(".city-select").append(cityOptions);}jQuery('select.city-select').on('change',function(){let cityId=this.value;if(0){}else{var restaurantOptions='<option value="" selected="selected">- Select -</option>';allBranchesData.forEach((element)=>{if(element.city_id==cityId)element.branches.forEach((branch)=>{restaurantOptions+="<option value="+branch.branch_id+">"+branch.branch_name+"</option>";});});jQuery(".restaurant-select").children().remove();jQuery(".restaurant-select").append(restaurantOptions);}});}});jQuery('div.main-submit input').on('click',function(e){e.preventDefault();jQuery('.error-red').remove();if(jQuery('input#edit-name').val()==""||jQuery('input#edit-name').val().length<=3)jQuery('input#edit-name').after('<p class="error-red" style="color:red; padding: 3px 1px">Please enter name.</p>');else if(testMobileFormat(jQuery('input#edit-mobile-no-').val())==false)jQuery('input#edit-mobile-no-').after('<p class="error-red" style="color:red; padding: 3px 1px">Please enter valid mobile no.</p>');else if(jQuery('input#edit-your-email').val()=="")jQuery('input#edit-your-email').after('<p class="error-red" style="color:red; padding: 3px 1px">Please enter valid email.</p>');else{let mail=jQuery('input#edit-your-email').val();if(testEmailFormat(mail))if(document.getElementById('feedback_subject_select').value=="")jQuery('#feedback_subject_select').after('<p class="error-red" style="color:red; padding: 3px 1px">Please select feedback Subject</p>');else if(jQuery("form.webform-submission-feedback-form select#edit-city :selected").val()=="")jQuery('select#edit-city').after('<p class="error-red" style="color:red; padding: 3px 1px">Please select a city</p>');else if(jQuery("form.webform-submission-feedback-form select#edit-restaurant :selected").val()=="")jQuery('select#edit-restaurant').after('<p class="error-red" style="color:red; padding: 3px 1px">Please select a restaurant</p>');else if(jQuery(" input[name='rate_your_experience_with_us']:checked").val()==""||jQuery(" input[name='rate_your_experience_with_us']:checked").val()==undefined)jQuery('#edit-rate-your-experience-with-us').after('<p class="error-red" style="color:red; padding: 3px 1px">Please select a rating</p>');else if(jQuery("form.webform-submission-feedback-form textarea#edit-your-queries").val()=="")jQuery('textarea#edit-your-queries').after('<p class="error-red" style="color:red; padding: 3px 1px">Please enter some feedback / Comments</p>');else if(jQuery("input#edit-authorization").prop('checked')!==true)jQuery('input#edit-authorization').parent().after('<p class="error-red" style="color:red; padding: 3px 1px">Please authorize us to contact you</p>');else FormValidationSuccess=true;else jQuery('input#edit-your-email').after('<p class="error-red" style="color:red; padding: 3px 1px">Please enter valid email.</p>');}if(FormValidationSuccess){let FQ_ID=jQuery('form.webform-submission-feedback-form select#feedback_subject_select').val();let FT_ID=undefined;feedbackQuestions.forEach((element)=>{if(FQ_ID==element.feed_back_question_id)FT_ID=element.feed_back_type_id;});let storeId='';let restaurantId=jQuery("form.webform-submission-feedback-form select#edit-restaurant :selected").val();allBranchesData.forEach((element)=>{element.branches.forEach((branch)=>{if(branch.branch_id==restaurantId)storeId=branch.store_id;});});APIformData={source:"web",user_name:jQuery('form.webform-submission-feedback-form input#edit-name').val()??"",user_email:jQuery('form.webform-submission-feedback-form input#edit-your-email').val()??"",user_phone:jQuery('form.webform-submission-feedback-form input#edit-mobile-no-').val().substr(-10)??"",feedback_type_id:parseInt(FT_ID)??"",feedback_question_id:parseInt(FQ_ID)??"",city:jQuery("form.webform-submission-feedback-form select#edit-city :selected").val()?jQuery("form.webform-submission-feedback-form select#edit-city :selected").text():"",outlet:jQuery("form.webform-submission-feedback-form select#edit-restaurant :selected").text()?jQuery("form.webform-submission-feedback-form select#edit-restaurant :selected").text():"",branch_id:storeId??"",order_id:jQuery("form.webform-submission-feedback-form input#edit-order-no-reservation-no").val()??"",images_url:[jQuery(".file a").attr('href')],rating:parseInt(jQuery("form.webform-submission-feedback-form input[name='rate_your_experience_with_us']:checked").val())??"",feedback_message:jQuery("form.webform-submission-feedback-form textarea#edit-your-queries").val()??"",user_auth_key:jQuery("form.webform-submission-feedback-form input#edit-authorization").prop('checked')?1:0};if(APIformData['source']!=""&&APIformData['user_name']!=""&&testEmailFormat(APIformData['user_email'])&&testMobileFormat(APIformData['user_phone'])&&APIformData['feedback_type_id']!==""&&APIformData['feedback_question_id']!==""&&APIformData['city']!=""&&APIformData['outlet']!=""&&APIformData['branch_id']!=""&&APIformData['rating']!=""&&APIformData['feedback_message']!=""&&APIformData['user_auth_key']!==0){if(!FeedbackApiTriggered)$.ajax({url:'/api/v1/delivery/feedback',method:'POST',headers:getHeaders(),data:JSON.stringify(APIformData),beforeSend:function(){loaderStart();FeedbackApiTriggered=true;},complete:function(){},success:function(data){jQuery('input.response-from-feedback-api').val('Response => '+JSON.stringify(data)+' Payload => '+JSON.stringify(APIformData));if(StopSubmission==false)jQuery('div.submit-2 input').click();},error:function(data){jQuery('input.response-from-feedback-api').val('Response => '+JSON.stringify(data)+' Payload => '+JSON.stringify(APIformData));if(StopSubmission==false)jQuery('div.submit-2 input').click();}});}else jQuery('#edit-actions-submit').before('<p class="error-red" style="color:red; padding: 3px 1px">Something went wrong, Please valid values in all fields.</p>');}});}$('.contact-slider').not('.slick-initialized').slick({infinite:true,slidesToShow:4,slidesToScroll:1,prevArrow:false,nextArrow:false,dots:true,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,mobileFirst:true}},{breakpoint:680,settings:{slidesToShow:2,slidesToScroll:2,mobileFirst:true}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,swipeToSlide:true,infinite:true,speed:500}}]});$('.updates-carousel .view-content').not('.slick-initialized').slick({infinite:true,slidesToShow:3,slidesToScroll:1,prevArrow:false,nextArrow:false,dots:true,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,mobileFirst:true}},{breakpoint:680,settings:{slidesToShow:2,slidesToScroll:2,mobileFirst:true}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,swipeToSlide:true,infinite:true,speed:500}}]});$('.menuToggle').click(function(){if($(window).width()>=1024){$('.menu-wrap').slideDown();$('body').addClass('show');return;}else $('.menu-wrap').addClass('show');});$(document).mouseup(function(e){var container=$('.menu-wrap--container');if(!container.is(e.target)&&container.has(e.target).length===0){$('.menu-wrap').removeClass('show');$('.notifications-snackbar').removeClass('notifications-snackbar-active');}var user_nav=$('.user-nav');if(!user_nav.is(e.target)&&user_nav.has(e.target).length===0)$('.user').removeClass('user-show');});var path=window.location.href.split('#')[0];$('.main-nav li a').each(function(){if(this.href===path)$(this).addClass('active');});var promotionpopup=localStorage.getItem('promotion-popup');if(promotionpopup==null){localStorage.setItem('promotion-popup',1);$('#promotion-popup-container').addClass('show-promotion');}$('#promotion-close-popup').click(function(){$('#promotion-popup-container').removeClass('show-promotion');});var promotionfooterpopup=localStorage.getItem('promotion-footer-popup');if(promotionfooterpopup==null){localStorage.setItem('promotion-footer-popup',1);setTimeout(function(){$('#promotion-featured-footer').addClass('show-promotion');},10000);}$('#promotion-footer-close-popup').click(function(e){$('#promotion-featured-footer').removeClass('show-promotion');localStorage.setItem('promotion-footer-popup',0);e.preventDefault();});$('#promotion-rightside-sticky-title').click(function(){$('.promotion-rightside-sticky-content').toggleClass('show-promotion');$('.promotion-rightside-sticky-title').toggleClass('rightside-title-expanded');$('.promotion-rightside-sticky-arrow-collapsed').toggleClass('rightside-expanded');});if($('.ui-front').children().children().hasClass('webform--current-job-opening'))$('.ui-dialog').once().wrap("<div class='career-page'></div>");$('.career-page .ui-icon-closethick').click(function(){$('.career-page .ui-dialog').unwrap();});$('.menu-close').click(function(){if($(window).width()>=1024){$('.menu-wrap').slideUp();$('body').removeClass('show');return;}else $('.menu-wrap').removeClass('show');});$('.banner-carousel').slick({infinite:true,slidesToShow:1,slidesToScroll:1,dots:true,arrows:false,fade:true,speed:1000,autoplay:true});$(once('bbqCommon','.accordion-header',context)).on('click',function(e){e.preventDefault();var $this=$(this);if($this.next().hasClass('show')){$this.next().removeClass('show');$this.next().slideUp(200);$this.parent().removeClass('active');}else{$this.next().toggleClass('show');$this.next().slideToggle(400);$this.parent().addClass('active');$this.toggleClass('active');}});$('.refund__card input:radio').click(function(){$('.refund__card').removeClass('selected');$(this).parent().addClass('selected');});});$('.navbar__toggler').click(function(){$(this).toggleClass('is-open');$(this).next().toggleClass('is-open');});$('.user').click(function(){$(this).toggleClass('user-show');$('.login--modal').addClass('show');});$('.login--modal-close').click(function(){$('.login--modal').removeClass('show');});$('.card--voucher .button--atc').click(function(e){e.preventDefault();$(this).next().show();$(this).hide();});$('.voucher--details .button--atc').click(function(e){e.preventDefault();$(this).next().show();$(this).hide();});$('.card--promotion .button--atc').click(function(e){e.preventDefault();$(this).next().show();$(this).hide();});function increaseValue(){var value=parseInt($(this).prev().value,10);value=isNaN(value)?0:value;if(value<10)value++;$(this).prev().value=value;}function decreaseValue(){var value=parseInt($(this).next().value,10);value=isNaN(value)?0:value;value<1?value=1:'';value--;$(this).next().value=value;}$('.checkbox-list').each(function(){var count=$(this).children().length;if(count>5&&!$(this).hasClass('checkbox-list--expanded')){$(this).addClass('checkbox-list--collapsed');var remaining=count-5;$(this).append('<a href=\'#\' class=\'checkbox-list__button\'>+'+remaining+' More</a>');}else $(this).addClass('checkbox-list--expanded');});$('.checkbox-list__button').click(function(e){e.preventDefault();$(this).parent().removeClass('checkbox-list--collapsed');$(this).parent().addClass('checkbox-list--expanded');$(this).hide();});$('.button--m-filter').click(function(){$('.l-filter').addClass('l-filter--show-m');$('.promotions-search--sidebar--content .sidebar-first').addClass('l-filter--show-m');});$('.l-filter__submit .button').click(function(){$('.l-filter').removeClass('l-filter--show-m');$('.promotions-search--sidebar--content .sidebar-first').removeClass('l-filter--show-m');});$('.button--m-sort').click(function(){if($(this).hasClass('button--m-sort--asc')){$(this).removeClass('button--m-sort--asc');$(this).addClass('button--m-sort--desc');}else{$(this).removeClass('button--m-sort--desc');$(this).addClass('button--m-sort--asc');}});$('.button--signin').click(function(){$('#signin-dialog').load('signin.html',function(){$('.form--signin .form__suffix a').click(function(e){$('.form--signin').hide();$('.form--signup').show();e.preventDefault();});$('.form--signup .form__suffix a').click(function(e){$('.form--signup').hide();$('.form--signin').show();e.preventDefault();});$('.button--submit-next').click(function(e){$('.form--signup').hide();$('.form--signin').show();setTimeout(function(){e.preventDefault();},3000);});$('.button--form-signin').click(function(e){if($('.form--signin').submit()){e.preventDefault();$('.signin__form-wrapper').hide();$('.signin__success').show();transferC;}setTimeout(function(){$('.form--signin').submit();},1000);});$('#timer').html('03:00');startTimer();$('#signin-dialog .close').click(function(e){$('#signin-dialog').children().remove();e.preventDefault();});});});function startTimer(){var presentTime=document.getElementById('timer').innerHTML;var timeArray=presentTime.split(/[:]+/);var m=timeArray[0];var s=checkSecond((timeArray[1]-1));if(s==59)m=m-1;document.getElementById('timer').innerHTML=m+':'+s;setTimeout(startTimer,1000);}function checkSecond(sec){if(sec<10&&sec>=0)sec='0'+sec;;if(sec<0)sec='59';;return sec;}$(document).on('click','.reservation--curtain .reservation__heading-action',function(e){$('.reservation--curtain').removeClass('reservation--visible');$('input[name="reason"]').prop('checked',false);$('input[name="refund"]').prop('checked',false);e.preventDefault();});$('#buffet-link').click(function(e){e.preventDefault();$('#a-la-carte').hide();$('#buffet').show();$('#beverages').hide();});$('#a-la-carte-link').click(function(e){e.preventDefault();$('#a-la-carte').show();$('#buffet').hide();$('#beverages').hide();});$('#beverages-link').click(function(e){e.preventDefault();$('#a-la-carte').hide();$('#buffet').hide();$('#beverages').show();});$('.voucher--info .info__content .info h3',context).click(function(){$(this).toggleClass('dropdown--expand');$(this).next().slideToggle(500);});$('.promotion--info .info__content .info h3',context).click(function(){$(this).toggleClass('dropdown--expand');$(this).next().slideToggle(500);});function isOnScreen(elem){if(elem.length==0)return;var $window=jQuery(window);var viewport_top=$window.scrollTop();var viewport_height=$window.height();var viewport_bottom=viewport_top+viewport_height;var $elem=jQuery(elem);var top=$elem.offset().top;var height=$elem.height();var bottom=top+height;return(top>=viewport_top&&top<viewport_bottom)||(bottom>viewport_top&&bottom<=viewport_bottom)||(height>viewport_height&&top<=viewport_top&&bottom>=viewport_bottom);}$(document).ready(function(){window.addEventListener('scroll',function(e){if(isOnScreen(jQuery('.s-offers .layout-container')))$(".store-reservation-form").addClass("store-reservation-form--static");else $(".store-reservation-form").removeClass("store-reservation-form--static");});});var imageCountmob=$('.views-field-branch-gallery-target-id .field-content .colorbox').length;var imageCount=imageCountmob-5;for(var i=0;i<=4;i++)$('.views-field-branch-gallery-target-id .field-content a').eq(i).addClass('s-gallery-item');$('.views-field-branch-gallery-target-id .field-content a').eq(0).addClass('s-gallery-item--first').append('<span>'+imageCountmob+' PHOTOS </span>');$('.views-field-branch-gallery-target-id .field-content a',context).eq(4).addClass('s-gallery-item s-gallery-item--last').wrap('<div class= "wrapper-right"> </div>');if(imageCountmob>5)$('.views-field-branch-gallery-target-id .field-content a').eq(4).append('<span>'+imageCount+' PHOTOS </span>');var imageCountmobMenu=$('.branch-menu-row .views-field-branch-menu-image-target-id .field-content .colorbox').length;var imageCountMenu=imageCountmobMenu-5;for(var i=0;i<=4;i++)$('.branch-menu-row .views-field-branch-menu-image-target-id .field-content a').eq(i).addClass('s-gallery-item');$('.branch-menu-row .views-field-branch-menu-image-target-id .field-content a').eq(0).addClass('s-gallery-item--first').append('<span>'+imageCountmobMenu+' PHOTOS </span>');$('.branch-menu-row .views-field-branch-menu-image-target-id .field-content a',context).eq(4).addClass('s-gallery-item s-gallery-item--last').wrap('<div class= "wrapper-right"> </div>');if(imageCountmobMenu>5)$('.branch-menu-row .views-field-branch-menu-image-target-id .field-content a').eq(4).append('<span>'+imageCountMenu+' PHOTOS </span>');$("#target_gallery",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#gallery").offset().top-100},1000);});$("#target_offers",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#offers").offset().top-100},1000);});$("#target_overview",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#overview").offset().top-100},1000);});$("#target_restaurant",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#about-restaurant").offset().top-100},1000);});$('.c-form__country-code,.c-form__mobile',context).wrapAll('<div class="c-form__phone"></div>');$('.paragraph__gallery-slider').slick({slidesToShow:1,slidesToScroll:1,fade:false,arrows:true,adaptiveHeight:true,infinite:false,useTransform:true,speed:500,cssEase:'cubic-bezier(0.77, 0, 0.18, 1)',responsive:[{breakpoint:1024,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true}},{breakpoint:680,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,swipeToSlide:true}}]});$('.paragraph__gallery-nav').on('init',function(event,slick){$('.paragraph__gallery-nav .slick-slide.slick-current').addClass('is-active');}).slick({slidesToShow:9,slidesToScroll:9,dots:false,focusOnSelect:false,infinite:false,arrows:false,responsive:[{breakpoint:1024,settings:{slidesToShow:5,slidesToScroll:5}},{breakpoint:640,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:420,settings:{slidesToShow:3,slidesToScroll:3}}]});$('.paragraph__gallery-slider').on('afterChange',function(event,slick,currentSlide){$('.paragraph__gallery-nav').slick('slickGoTo',currentSlide);var currrentNavSlideElem='.paragraph__gallery-nav .slick-slide[data-slick-index="'+currentSlide+'"]';$('.paragraph__gallery-nav .slick-slide.is-active').removeClass('is-active');$(currrentNavSlideElem).addClass('is-active');});$('.paragraph__gallery-nav').on('click','.slick-slide',function(event){event.preventDefault();var goToSingleSlide=$(this).data('slick-index');$('.paragraph__gallery-slider').slick('slickGoTo',goToSingleSlide);});$('.paragraph__testimonial-section').slick({infinite:true,slidesToShow:3,slidesToScroll:1,dots:true,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:1,mobileFirst:true}},{breakpoint:680,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1,mobileFirst:true,swipeToSlide:true,speed:500}}]});$("#apply-job-posting",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#webform-job-posting").offset().top-100},1000);});$("#enquire-now-button",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#enquire-now").offset().top-100},1000);});$(".mobile-reserve-button .input--group-button",context).click(function(e){$('.form--banner').css({"display":"block","margin-top":"0px"});$('#header').css("display","none");$('.mobile-reserve-button').hide();});$(".form--banner .close",context).click(function(e){$('.form--banner').css({"display":"none","margin-top":"60px"});$('#header').css("display","flex");$('.mobile-reserve-button').show();});$("#target_menu",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#s-branch-menu-tab").offset().top-100},1000);});$("#target_gallery",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#gallery").offset().top-100},1000);});$("#target_offers",context).click(function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#offers").offset().top-100},1000);});var links=$('.s-menu__item > .s-menu__link');links.on('click',function(){links.closest('.s-menu__item').removeClass('active');$(this).closest('.s-menu__item').addClass('active');});$('.social-links .social-media-links--platforms li  a').attr('target','_blank');$(".promotion-copy-code",context).click(function(e){var $temp=$("<input>");$("body").append($temp);$temp.val($('#promotion-coupon').text()).select();document.execCommand("copy");$temp.remove();});var element=document.getElementsByClassName('messages--status');if(element[0]){document.querySelector(".messages--status h2").style.display="none";if((element[0].innerText=='Your message has been sent.')||(element[0].innerText=='Your message sent successfully'))toastr.success(element[0].innerText);element[0].setAttribute("style","display:none;");}$(".branch-dropdown-options",context).click(function(e){$(this).find('.select2-selection').toggleClass('show');});$('.s-voucher__header .header__m-filter .button--m-sort',context).click(function(){if($(this).hasClass('button--m-sort--asc'))$('.form-item-sort-by select').val('number').trigger('change');else $('.form-item-sort-by select').val('number_1').trigger('change');});}};$('#accordian > ul li').eq(0).addClass('active');$('#accordian > ul li ul li').eq(0).addClass('active');$('#accordian > ul li ul li ul li').eq(0).addClass('active');$('#accordian-data > ul li').eq(0).addClass('active');$("#accordian #investor-link").click(function(e){e.preventDefault();var link=$(this);var closest_ul=link.closest("ul");var parallel_active_links=closest_ul.find(".active");var closest_li=link.closest("li");var link_status=closest_li.hasClass("active");var count=0;closest_ul.find("ul").slideUp(function(){if(++count==closest_ul.find("ul").length)parallel_active_links.removeClass("active");$("#accordian ul li.active ul li.active ul.year-container li").eq(0).addClass('active');});if(!link_status){closest_li.children("ul").slideDown();closest_li.addClass("active");$("#accordian ul li.active ul li.active ul.year-container li").eq(0).addClass('active');}});$('#accordian > ul li ul li ul li').click(function(e){$("#accordian > ul li ul li ul li").not($(this)).removeClass('active');});$('.blogs--detailed-share-button .addtoany_share').append('<span>Share</span>');$('.news--detailed-share-button .addtoany_share').append('<span>Share</span>');$(document.body).on('click','.layout-container-financails .tabs-list > li > a',function(){event.preventDefault();var tabid=$(this).attr('href');$(".tabs-list li,.tabs div.tab").removeClass("active");$(".tab").hide();$(tabid).css('display','block');$(this).parents("li").addClass('active');});$(document.body).on('click','.yearly-tab > li > a',function(event){event.preventDefault();let anchor_el=$(this);let tabId=anchor_el.attr('href');$(tabId).find('.tabs-list li').removeClass('active').eq(0).addClass('active');$(tabId).find('.tab').hide().eq(0).css('display','block');return true;});$(document).ready(function(){$(".tabs-list-first li a").click(function(e){e.preventDefault();});$(".tabs-list-first li").click(function(){var tabid=$(this).find("a").attr("href");$(".tabs-list-first li,.tabs-first div.tab-first").removeClass("active");$(".tab-first").hide();$(tabid).show();$(this).addClass("active");});});$(function(){var current=location.pathname;$('.menu--investor ul.menu li a').each(function(){var $this=$(this);if($this.attr('href').indexOf(current)!==-1)$this.addClass('active');});});$(function(){$('.menu--investor .menu').find('> li.menu-item--expanded').click(function(){$(this).find('ul.menu').stop(true,true).slideToggle(400);return false;});$('.menu--investor > .menu > li > ul > li').click(function(e){e.stopPropagation();});});$('.webform-submission-feedback-form .webform-section fieldset input[type="radio"]').click(function(){$(this).parent().parent().parent().parent().parent().parent().toggleClass('stepForm',this.checked);});$('.webform-submission-partner-with-us-form .webform-section fieldset input[type="radio"]').click(function(){$(this).parent().parent().parent().parent().parent().parent().toggleClass('stepForm',this.checked);});$('.webform-submission-partner-with-us-form #edit-step-2-section fieldset input[type="radio"]').click(function(){$(this).parent().parent().parent().parent().toggleClass('stepFormPartner',this.checked);});$('.webform-submission-feedback-form .webform-section#edit-step-2-section fieldset input[type="radio"]').click(function(){$('#edit-step-3-section ').toggleClass('third-step-form',this.checked);});$('.webform-submission-feedback-form #edit-step-1 input[type="radio"]').on('change',function(){$('.webform-submission-feedback-form #edit-step-2-section').removeClass('stepForm',this.checked);});$('.selectbtn').click(function(){$('.select2-selection__rendered').each(function(){if($(this).text()=='Select Location')$('.select-validate-box').addClass('enableValidation');});});$('select.form-control').on('change',function(){$('.select-validate-box').removeClass('enableValidation');});$(document).on('click','.webform-options-display-buttons-label',function(){$(".webform-options-display-buttons-label").removeClass("feedback-rading-icon");$(this).addClass("feedback-rading-icon");});})(jQuery,Drupal,once);;!function(e){e(["jquery"],function(e){return function(){function t(e,t,n){return g({type:O.error,iconClass:m().iconClasses.error,message:e,optionsOverride:n,title:t});}function n(t,n){return t||(t=m()),v=e("#"+t.containerId),v.length?v:(n&&(v=d(t)),v);}function o(e,t,n){return g({type:O.info,iconClass:m().iconClasses.info,message:e,optionsOverride:n,title:t});}function s(e){C=e;}function i(e,t,n){return g({type:O.success,iconClass:m().iconClasses.success,message:e,optionsOverride:n,title:t});}function a(e,t,n){return g({type:O.warning,iconClass:m().iconClasses.warning,message:e,optionsOverride:n,title:t});}function r(e,t){var o=m();v||n(o),u(e,o,t)||l(o);}function c(t){var o=m();return v||n(o),t&&0===e(":focus",t).length?void h(t):void(v.children().length&&v.remove());}function l(t){for(var n=v.children(),o=n.length-1;o>=0;o--)u(e(n[o]),t);}function u(t,n,o){var s=!(!o||!o.force)&&o.force;return!(!t||!s&&0!==e(":focus",t).length)&&(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){h(t);}}),!0);}function d(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass),v.appendTo(e(t.target)),v;}function p(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1};}function f(e){C&&C(e);}function g(t){function o(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}function s(){c(),u(),d(),p(),g(),C(),l(),i();}function i(){var e="";switch(t.iconClass){case "toast-success":case "toast-info":e="polite";break;default:e="assertive";}I.attr("aria-live",e);}function a(){E.closeOnHover&&I.hover(H,D),!E.onclick&&E.tapToDismiss&&I.click(b),E.closeButton&&j&&j.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),E.onCloseClick&&E.onCloseClick(e),b(!0);}),E.onclick&&I.click(function(e){E.onclick(e),b();});}function r(){I.hide(),I[E.showMethod]({duration:E.showDuration,easing:E.showEasing,complete:E.onShown}),E.timeOut>0&&(k=setTimeout(b,E.timeOut),F.maxHideTime=parseFloat(E.timeOut),F.hideEta=(new Date()).getTime()+F.maxHideTime,E.progressBar&&(F.intervalId=setInterval(x,10)));}function c(){t.iconClass&&I.addClass(E.toastClass).addClass(y);}function l(){E.newestOnTop?v.prepend(I):v.append(I);}function u(){if(t.title){var e=t.title;E.escapeHtml&&(e=o(t.title)),M.append(e).addClass(E.titleClass),I.append(M);}}function d(){if(t.message){var e=t.message;E.escapeHtml&&(e=o(t.message)),B.append(e).addClass(E.messageClass),I.append(B);}}function p(){E.closeButton&&(j.addClass(E.closeClass).attr("role","button"),I.prepend(j));}function g(){E.progressBar&&(q.addClass(E.progressClass),I.prepend(q));}function C(){E.rtl&&I.addClass("rtl");}function O(e,t){if(e.preventDuplicates){if(t.message===w)return!0;w=t.message;}return!1;}function b(t){var n=t&&E.closeMethod!==!1?E.closeMethod:E.hideMethod,o=t&&E.closeDuration!==!1?E.closeDuration:E.hideDuration,s=t&&E.closeEasing!==!1?E.closeEasing:E.hideEasing;if(!e(":focus",I).length||t)return clearTimeout(F.intervalId),I[n]({duration:o,easing:s,complete:function(){h(I),clearTimeout(k),E.onHidden&&"hidden"!==P.state&&E.onHidden(),P.state="hidden",P.endTime=new Date(),f(P);}});}function D(){(E.timeOut>0||E.extendedTimeOut>0)&&(k=setTimeout(b,E.extendedTimeOut),F.maxHideTime=parseFloat(E.extendedTimeOut),F.hideEta=(new Date()).getTime()+F.maxHideTime);}function H(){clearTimeout(k),F.hideEta=0,I.stop(!0,!0)[E.showMethod]({duration:E.showDuration,easing:E.showEasing});}function x(){var e=(F.hideEta-(new Date()).getTime())/F.maxHideTime*100;q.width(e+"%");}var E=m(),y=t.iconClass||E.iconClass;if("undefined"!=typeof t.optionsOverride&&(E=e.extend(E,t.optionsOverride),y=t.optionsOverride.iconClass||y),!O(E,t)){T++,v=n(E,!0);var k=null,I=e("<div/>"),M=e("<div/>"),B=e("<div/>"),q=e("<div/>"),j=e(E.closeHtml),F={intervalId:null,hideEta:null,maxHideTime:null},P={toastId:T,state:"visible",startTime:new Date(),options:E,map:t};return s(),r(),a(),f(P),E.debug&&console&&console.log(P),I;}}function m(){return e.extend({},p(),b.options);}function h(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),w=void 0));}var v,C,w,T=0,O={error:"error",info:"info",success:"success",warning:"warning"},b={clear:r,remove:c,error:t,getContainer:n,info:o,options:{},subscribe:s,success:i,version:"2.1.4",warning:a};return b;}();});}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery);});;(function($,Drupal){Drupal.theme.progressBar=function(id){return(`<div id="${id}" class="progress" aria-live="polite">`+'<div class="progress__label">&nbsp;</div>'+'<div class="progress__track"><div class="progress__bar"></div></div>'+'<div class="progress__percentage"></div>'+'<div class="progress__description">&nbsp;</div>'+'</div>');};Drupal.ProgressBar=function(id,updateCallback,method,errorCallback){this.id=id;this.method=method||'GET';this.updateCallback=updateCallback;this.errorCallback=errorCallback;this.element=$(Drupal.theme('progressBar',id));};$.extend(Drupal.ProgressBar.prototype,{setProgress(percentage,message,label){if(percentage>=0&&percentage<=100){$(this.element).find('div.progress__bar').each(function(){this.style.width=`${percentage}%`;});$(this.element).find('div.progress__percentage').html(`${percentage}%`);}$('div.progress__description',this.element).html(message);$('div.progress__label',this.element).html(label);if(this.updateCallback)this.updateCallback(percentage,message,this);},startMonitoring(uri,delay){this.delay=delay;this.uri=uri;this.sendPing();},stopMonitoring(){clearTimeout(this.timer);this.uri=null;},sendPing(){if(this.timer)clearTimeout(this.timer);if(this.uri){const pb=this;let uri=this.uri;if(!uri.includes('?'))uri+='?';else uri+='&';uri+='_format=json';$.ajax({type:this.method,url:uri,data:'',dataType:'json',success(progress){if(progress.status===0){pb.displayError(progress.data);return;}pb.setProgress(progress.percentage,progress.message,progress.label);pb.timer=setTimeout(()=>{pb.sendPing();},pb.delay);},error(xmlhttp){const e=new Drupal.AjaxError(xmlhttp,pb.uri);pb.displayError(`<pre>${e.message}</pre>`);}});}},displayError(string){const error=$('<div class="messages messages--error"></div>').html(string);$(this.element).before(error).hide();if(this.errorCallback)this.errorCallback(this);}});})(jQuery,Drupal);;loadjs=function(){var h=function(){},c={},u={},f={};function o(e,n){if(e){var r=f[e];if(u[e]=n,r)for(;r.length;)r[0](e,n),r.splice(0,1)}}function l(e,n){e.call&&(e={success:e}),n.length?(e.error||h)(n):(e.success||h)(e)}function d(r,t,s,i){var c,o,e=document,n=s.async,u=(s.numRetries||0)+1,f=s.before||h,l=r.replace(/[\?|#].*$/,""),a=r.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(l)?((o=e.createElement("link")).rel="stylesheet",o.href=a,(c="hideFocus"in o)&&o.relList&&(c=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(l)?(o=e.createElement("img")).src=a:((o=e.createElement("script")).src=r,o.async=void 0===n||n),!(o.onload=o.onerror=o.onbeforeload=function(e){var n=e.type[0];if(c)try{o.sheet.cssText.length||(n="e")}catch(e){18!=e.code&&(n="e")}if("e"==n){if((i+=1)<u)return d(r,t,s,i)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";t(r,n,e.defaultPrevented)})!==f(r,o)&&e.head.appendChild(o)}function r(e,n,r){var t,s;if(n&&n.trim&&(t=n),s=(t?r:n)||{},t){if(t in c)throw"LoadJS";c[t]=!0}function i(n,r){!function(e,t,n){var r,s,i=(e=e.push?e:[e]).length,c=i,o=[];for(r=function(e,n,r){if("e"==n&&o.push(e),"b"==n){if(!r)return;o.push(e)}--i||t(o)},s=0;s<c;s++)d(e[s],r,n)}(e,function(e){l(s,e),n&&l({success:n,error:r},e),o(t,e)},s)}if(s.returnPromise)return new Promise(i);i()}return r.ready=function(e,n){return function(e,r){e=e.push?e:[e];var n,t,s,i=[],c=e.length,o=c;for(n=function(e,n){n.length&&i.push(e),--o||r(i)};c--;)t=e[c],(s=u[t])?n(t,s):(f[t]=f[t]||[]).push(n)}(e,function(e){l(n,e)}),r},r.done=function(e){o(e,[])},r.reset=function(){c={},u={},f={}},r.isDefined=function(e){return e in c},r}();;Drupal.debounce=function(func,wait,immediate){let timeout;let result;return function(...args){const context=this;const later=function(){timeout=null;if(!immediate)result=func.apply(context,args);};const callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result;};};;(function(Drupal,debounce){let liveElement;const announcements=[];Drupal.behaviors.drupalAnnounce={attach(context){if(!liveElement){liveElement=document.createElement('div');liveElement.id='drupal-live-announce';liveElement.className='visually-hidden';liveElement.setAttribute('aria-live','polite');liveElement.setAttribute('aria-busy','false');document.body.appendChild(liveElement);}}};function announce(){const text=[];let priority='polite';let announcement;const il=announcements.length;for(let i=0;i<il;i++){announcement=announcements.pop();text.unshift(announcement.text);if(announcement.priority==='assertive')priority='assertive';}if(text.length){liveElement.innerHTML='';liveElement.setAttribute('aria-busy','true');liveElement.setAttribute('aria-live',priority);liveElement.innerHTML=text.join('\n');liveElement.setAttribute('aria-busy','false');}}Drupal.announce=function(text,priority){announcements.push({text,priority});return debounce(announce,200)();};})(Drupal,Drupal.debounce);;((Drupal)=>{Drupal.Message=class{constructor(messageWrapper=null){if(!messageWrapper)this.messageWrapper=Drupal.Message.defaultWrapper();else this.messageWrapper=messageWrapper;}static defaultWrapper(){let wrapper=document.querySelector('[data-drupal-messages]');if(!wrapper){wrapper=document.querySelector('[data-drupal-messages-fallback]');wrapper.removeAttribute('data-drupal-messages-fallback');wrapper.setAttribute('data-drupal-messages','');wrapper.classList.remove('hidden');}return wrapper.innerHTML===''?Drupal.Message.messageInternalWrapper(wrapper):wrapper.firstElementChild;}static getMessageTypeLabels(){return{status:Drupal.t('Status message'),error:Drupal.t('Error message'),warning:Drupal.t('Warning message')};}add(message,options={}){if(!options.hasOwnProperty('type'))options.type='status';if(typeof message!=='string')throw new Error('Message must be a string.');Drupal.Message.announce(message,options);options.id=options.id?String(options.id):`${options.type}-${Math.random().toFixed(15).replace('0.','')}`;if(!Drupal.Message.getMessageTypeLabels().hasOwnProperty(options.type)){const{type}=options;throw new Error(`The message type, ${type}, is not present in Drupal.Message.getMessageTypeLabels().`);}this.messageWrapper.appendChild(Drupal.theme('message',{text:message},options));return options.id;}select(id){return this.messageWrapper.querySelector(`[data-drupal-message-id^="${id}"]`);}remove(id){return this.messageWrapper.removeChild(this.select(id));}clear(){Array.prototype.forEach.call(this.messageWrapper.querySelectorAll('[data-drupal-message-id]'),(message)=>{this.messageWrapper.removeChild(message);});}static announce(message,options){if(!options.priority&&(options.type==='warning'||options.type==='error'))options.priority='assertive';if(options.announce!=='')Drupal.announce(options.announce||message,options.priority);}static messageInternalWrapper(messageWrapper){const innerWrapper=document.createElement('div');innerWrapper.setAttribute('class','messages__wrapper');messageWrapper.insertAdjacentElement('afterbegin',innerWrapper);return innerWrapper;}};Drupal.theme.message=({text},{type,id})=>{const messagesTypes=Drupal.Message.getMessageTypeLabels();const messageWrapper=document.createElement('div');messageWrapper.setAttribute('class',`messages messages--${type}`);messageWrapper.setAttribute('role',type==='error'||type==='warning'?'alert':'status');messageWrapper.setAttribute('data-drupal-message-id',id);messageWrapper.setAttribute('data-drupal-message-type',type);messageWrapper.setAttribute('aria-label',messagesTypes[type]);messageWrapper.innerHTML=`${text}`;return messageWrapper;};})(Drupal);;(function($,window,Drupal,drupalSettings,loadjs,{isFocusable,tabbable}){Drupal.behaviors.AJAX={attach(context,settings){function loadAjaxBehavior(base){const elementSettings=settings.ajax[base];if(typeof elementSettings.selector==='undefined')elementSettings.selector=`#${base}`;once('drupal-ajax',$(elementSettings.selector)).forEach((el)=>{elementSettings.element=el;elementSettings.base=base;Drupal.ajax(elementSettings);});}Object.keys(settings.ajax||{}).forEach(loadAjaxBehavior);Drupal.ajax.bindAjaxLinks(document.body);once('ajax','.use-ajax-submit').forEach((el)=>{const elementSettings={};elementSettings.url=$(el.form).attr('action');elementSettings.setClick=true;elementSettings.event='click';elementSettings.progress={type:'throbber'};elementSettings.base=el.id;elementSettings.element=el;Drupal.ajax(elementSettings);});},detach(context,settings,trigger){if(trigger==='unload')Drupal.ajax.expired().forEach((instance)=>{Drupal.ajax.instances[instance.instanceIndex]=null;});}};Drupal.AjaxError=function(xmlhttp,uri,customMessage){let statusCode;let statusText;let responseText;if(xmlhttp.status)statusCode=`\n${Drupal.t('An AJAX HTTP error occurred.')}\n${Drupal.t('HTTP Result Code: !status',{'!status':xmlhttp.status})}`;else statusCode=`\n${Drupal.t('An AJAX HTTP request terminated abnormally.')}`;statusCode+=`\n${Drupal.t('Debugging information follows.')}`;const pathText=`\n${Drupal.t('Path: !uri',{'!uri':uri})}`;statusText='';try{statusText=`\n${Drupal.t('StatusText: !statusText',{'!statusText':xmlhttp.statusText.trim()})}`;}catch(e){}responseText='';try{responseText=`\n${Drupal.t('ResponseText: !responseText',{'!responseText':xmlhttp.responseText.trim()})}`;}catch(e){}responseText=responseText.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,'');responseText=responseText.replace(/[\n]+\s+/g,'\n');const readyStateText=xmlhttp.status===0?`\n${Drupal.t('ReadyState: !readyState',{'!readyState':xmlhttp.readyState})}`:'';customMessage=customMessage?`\n${Drupal.t('CustomMessage: !customMessage',{'!customMessage':customMessage})}`:'';this.message=statusCode+pathText+statusText+customMessage+responseText+readyStateText;this.name='AjaxError';if(!Drupal.AjaxError.messages)Drupal.AjaxError.messages=new Drupal.Message();Drupal.AjaxError.messages.add(Drupal.t("Oops, something went wrong. Check your browser's developer console for more details."),{type:'error'});};Drupal.AjaxError.prototype=new Error();Drupal.AjaxError.prototype.constructor=Drupal.AjaxError;Drupal.ajax=function(settings){if(arguments.length!==1)throw new Error('Drupal.ajax() function must be called with one configuration object only');const base=settings.base||false;const element=settings.element||false;delete settings.base;delete settings.element;if(!settings.progress&&!element)settings.progress=false;const ajax=new Drupal.Ajax(base,element,settings);ajax.instanceIndex=Drupal.ajax.instances.length;Drupal.ajax.instances.push(ajax);return ajax;};Drupal.ajax.instances=[];Drupal.ajax.expired=function(){return Drupal.ajax.instances.filter((instance)=>instance&&instance.element!==false&&!document.body.contains(instance.element));};Drupal.ajax.bindAjaxLinks=(element)=>{once('ajax','.use-ajax',element).forEach((ajaxLink)=>{const $linkElement=$(ajaxLink);const elementSettings={progress:{type:'throbber'},dialogType:$linkElement.data('dialog-type'),dialog:$linkElement.data('dialog-options'),dialogRenderer:$linkElement.data('dialog-renderer'),base:$linkElement.attr('id'),element:ajaxLink};const href=$linkElement.attr('href');if(href){elementSettings.url=href;elementSettings.event='click';}const httpMethod=$linkElement.data('ajax-http-method');if(httpMethod)elementSettings.httpMethod=httpMethod;Drupal.ajax(elementSettings);});};Drupal.Ajax=function(base,element,elementSettings){const defaults={httpMethod:'POST',event:element?'mousedown':null,keypress:true,selector:base?`#${base}`:null,effect:'none',speed:'none',method:'replaceWith',progress:{type:'throbber',message:Drupal.t('Processing...')},submit:{js:true}};$.extend(this,defaults,elementSettings);this.commands=new Drupal.AjaxCommands();this.instanceIndex=false;if(this.wrapper)this.wrapper=`#${this.wrapper}`;this.element=element;this.preCommandsFocusedElementSelector=null;this.elementSettings=elementSettings;if(this.element&&this.element.form)this.$form=$(this.element.form);if(!this.url){const $element=$(this.element);if(this.element.tagName==='A')this.url=$element.attr('href');else{if(this.element&&element.form)this.url=this.$form.attr('action');}}const originalUrl=this.url;this.url=this.url.replace(/\/nojs(\/|$|\?|#)/,'/ajax$1');if(drupalSettings.ajaxTrustedUrl[originalUrl])drupalSettings.ajaxTrustedUrl[this.url]=true;const ajax=this;ajax.options={url:ajax.url,data:ajax.submit,isInProgress(){return ajax.ajaxing;},beforeSerialize(elementSettings,options){return ajax.beforeSerialize(elementSettings,options);},beforeSubmit(formValues,elementSettings,options){ajax.ajaxing=true;ajax.preCommandsFocusedElementSelector=null;return ajax.beforeSubmit(formValues,elementSettings,options);},beforeSend(xmlhttprequest,options){ajax.ajaxing=true;return ajax.beforeSend(xmlhttprequest,options);},success(response,status,xmlhttprequest){ajax.preCommandsFocusedElementSelector=document.activeElement.getAttribute('data-drupal-selector');if(typeof response==='string')response=$.parseJSON(response);if(response!==null&&!drupalSettings.ajaxTrustedUrl[ajax.url])if(xmlhttprequest.getResponseHeader('X-Drupal-Ajax-Token')!=='1'){const customMessage=Drupal.t('The response failed verification so will not be processed.');return ajax.error(xmlhttprequest,ajax.url,customMessage);}return(Promise.resolve(ajax.success(response,status)).then(()=>{ajax.ajaxing=false;$(document).trigger('ajaxSuccess',[xmlhttprequest,this]);$(document).trigger('ajaxComplete',[xmlhttprequest,this]);if(--$.active===0)$(document).trigger('ajaxStop');}));},error(xmlhttprequest,status,error){ajax.ajaxing=false;},complete(xmlhttprequest,status){if(status==='error'||status==='parsererror')return ajax.error(xmlhttprequest,ajax.url);},dataType:'json',jsonp:false,method:ajax.httpMethod};if(elementSettings.dialog)ajax.options.data.dialogOptions=elementSettings.dialog;if(!ajax.options.url.includes('?'))ajax.options.url+='?';else ajax.options.url+='&';let wrapper=`drupal_${elementSettings.dialogType||'ajax'}`;if(elementSettings.dialogRenderer)wrapper+=`.${elementSettings.dialogRenderer}`;ajax.options.url+=`${Drupal.ajax.WRAPPER_FORMAT}=${wrapper}`;$(ajax.element).on(elementSettings.event,function(event){if(!drupalSettings.ajaxTrustedUrl[ajax.url]&&!Drupal.url.isLocal(ajax.url))throw new Error(Drupal.t('The callback URL is not local and not trusted: !url',{'!url':ajax.url}));return ajax.eventResponse(this,event);});if(elementSettings.keypress)$(ajax.element).on('keypress',function(event){return ajax.keypressResponse(this,event);});if(elementSettings.prevent)$(ajax.element).on(elementSettings.prevent,false);};Drupal.ajax.WRAPPER_FORMAT='_wrapper_format';Drupal.Ajax.AJAX_REQUEST_PARAMETER='_drupal_ajax';Drupal.Ajax.prototype.execute=function(){if(this.ajaxing)return;try{this.beforeSerialize(this.element,this.options);return $.ajax(this.options);}catch(e){this.ajaxing=false;window.alert(`An error occurred while attempting to process ${this.options.url}: ${e.message}`);return $.Deferred().reject();}};Drupal.Ajax.prototype.keypressResponse=function(element,event){const ajax=this;if(event.which===13||(event.which===32&&element.type!=='text'&&element.type!=='textarea'&&element.type!=='tel'&&element.type!=='number')){event.preventDefault();event.stopPropagation();$(element).trigger(ajax.elementSettings.event);}};Drupal.Ajax.prototype.eventResponse=function(element,event){event.preventDefault();event.stopPropagation();const ajax=this;if(ajax.ajaxing)return;try{if(ajax.$form){if(ajax.setClick)element.form.clk=element;ajax.$form.ajaxSubmit(ajax.options);}else{ajax.beforeSerialize(ajax.element,ajax.options);$.ajax(ajax.options);}}catch(e){ajax.ajaxing=false;window.alert(`An error occurred while attempting to process ${ajax.options.url}: ${e.message}`);}};Drupal.Ajax.prototype.beforeSerialize=function(element,options){if(this.$form&&document.body.contains(this.$form.get(0))){const settings=this.settings||drupalSettings;Drupal.detachBehaviors(this.$form.get(0),settings,'serialize');}options.data[Drupal.Ajax.AJAX_REQUEST_PARAMETER]=1;const pageState=drupalSettings.ajaxPageState;options.data['ajax_page_state[theme]']=pageState.theme;options.data['ajax_page_state[theme_token]']=pageState.theme_token;options.data['ajax_page_state[libraries]']=pageState.libraries;};Drupal.Ajax.prototype.beforeSubmit=function(formValues,element,options){};Drupal.Ajax.prototype.beforeSend=function(xmlhttprequest,options){if(this.$form){options.extraData=options.extraData||{};options.extraData.ajax_iframe_upload='1';const v=$.fieldValue(this.element);if(v!==null)options.extraData[this.element.name]=v;}$(this.element).prop('disabled',true);if(!this.progress||!this.progress.type)return;const progressIndicatorMethod=`setProgressIndicator${this.progress.type.slice(0,1).toUpperCase()}${this.progress.type.slice(1).toLowerCase()}`;if(progressIndicatorMethod in this&&typeof this[progressIndicatorMethod]==='function')this[progressIndicatorMethod].call(this);};Drupal.theme.ajaxProgressThrobber=(message)=>{const messageMarkup=typeof message==='string'?Drupal.theme('ajaxProgressMessage',message):'';const throbber='<div class="throbber">&nbsp;</div>';return `<div class="ajax-progress ajax-progress-throbber">${throbber}${messageMarkup}</div>`;};Drupal.theme.ajaxProgressIndicatorFullscreen=()=>'<div class="ajax-progress ajax-progress-fullscreen">&nbsp;</div>';Drupal.theme.ajaxProgressMessage=(message)=>`<div class="message">${message}</div>`;Drupal.theme.ajaxProgressBar=($element)=>$('<div class="ajax-progress ajax-progress-bar"></div>').append($element);Drupal.Ajax.prototype.setProgressIndicatorBar=function(){const progressBar=new Drupal.ProgressBar(`ajax-progress-${this.element.id}`,$.noop,this.progress.method,$.noop);if(this.progress.message)progressBar.setProgress(-1,this.progress.message);if(this.progress.url)progressBar.startMonitoring(this.progress.url,this.progress.interval||1500);this.progress.element=$(Drupal.theme('ajaxProgressBar',progressBar.element));this.progress.object=progressBar;$(this.element).after(this.progress.element);};Drupal.Ajax.prototype.setProgressIndicatorThrobber=function(){this.progress.element=$(Drupal.theme('ajaxProgressThrobber',this.progress.message));if($(this.element).closest('[data-drupal-ajax-container]').length)$(this.element).closest('[data-drupal-ajax-container]').after(this.progress.element);else $(this.element).after(this.progress.element);};Drupal.Ajax.prototype.setProgressIndicatorFullscreen=function(){this.progress.element=$(Drupal.theme('ajaxProgressIndicatorFullscreen'));$('body').append(this.progress.element);};Drupal.Ajax.prototype.commandExecutionQueue=function(response,status){const ajaxCommands=this.commands;return Object.keys(response||{}).reduce((executionQueue,key)=>executionQueue.then(()=>{const{command}=response[key];if(command&&ajaxCommands[command])return ajaxCommands[command](this,response[key],status);}),Promise.resolve());};Drupal.Ajax.prototype.success=function(response,status){if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.element).prop('disabled',false);const elementParents=$(this.element).parents('[data-drupal-selector]').addBack().toArray();const focusChanged=Object.keys(response||{}).some((key)=>{const{command,method}=response[key];return(command==='focusFirst'||command==='openDialog'||(command==='invoke'&&method==='focus'));});return(this.commandExecutionQueue(response,status).then(()=>{if(!focusChanged){let target=false;if(this.element){if($(this.element).data('refocus-blur')&&this.preCommandsFocusedElementSelector)target=document.querySelector(`[data-drupal-selector="${this.preCommandsFocusedElementSelector}"]`);if(!target&&!$(this.element).data('disable-refocus')){for(let n=elementParents.length-1;!target&&n>=0;n--)target=document.querySelector(`[data-drupal-selector="${elementParents[n].getAttribute('data-drupal-selector')}"]`);}}if(target)$(target).trigger('focus');}if(this.$form&&document.body.contains(this.$form.get(0))){const settings=this.settings||drupalSettings;Drupal.attachBehaviors(this.$form.get(0),settings);}this.settings=null;}).catch((error)=>console.error(Drupal.t('An error occurred during the execution of the Ajax response: !error',{'!error':error}))));};Drupal.Ajax.prototype.getEffect=function(response){const type=response.effect||this.effect;const speed=response.speed||this.speed;const effect={};if(type==='none'){effect.showEffect='show';effect.hideEffect='hide';effect.showSpeed='';}else if(type==='fade'){effect.showEffect='fadeIn';effect.hideEffect='fadeOut';effect.showSpeed=speed;}else{effect.showEffect=`${type}Toggle`;effect.hideEffect=`${type}Toggle`;effect.showSpeed=speed;}return effect;};Drupal.Ajax.prototype.error=function(xmlhttprequest,uri,customMessage){if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.wrapper).show();$(this.element).prop('disabled',false);if(this.$form&&document.body.contains(this.$form.get(0))){const settings=this.settings||drupalSettings;Drupal.attachBehaviors(this.$form.get(0),settings);}throw new Drupal.AjaxError(xmlhttprequest,uri,customMessage);};Drupal.theme.ajaxWrapperNewContent=($newContent,ajax,response)=>(response.effect||ajax.effect)!=='none'&&$newContent.filter((i)=>!(($newContent[i].nodeName==='#comment'||($newContent[i].nodeName==='#text'&&/^(\s|\n|\r)*$/.test($newContent[i].textContent))))).length>1?Drupal.theme('ajaxWrapperMultipleRootElements',$newContent):$newContent;Drupal.theme.ajaxWrapperMultipleRootElements=($elements)=>$('<div></div>').append($elements);Drupal.AjaxCommands=function(){};Drupal.AjaxCommands.prototype={insert(ajax,response){const $wrapper=response.selector?$(response.selector):$(ajax.wrapper);const method=response.method||ajax.method;const effect=ajax.getEffect(response);const settings=response.settings||ajax.settings||drupalSettings;let $newContent=$($.parseHTML(response.data,document,true));$newContent=Drupal.theme('ajaxWrapperNewContent',$newContent,ajax,response);switch(method){case 'html':case 'replaceWith':case 'replaceAll':case 'empty':case 'remove':Drupal.detachBehaviors($wrapper.get(0),settings);break;default:break;}$wrapper[method]($newContent);if(effect.showEffect!=='show')$newContent.hide();const $ajaxNewContent=$newContent.find('.ajax-new-content');if($ajaxNewContent.length){$ajaxNewContent.hide();$newContent.show();$ajaxNewContent[effect.showEffect](effect.showSpeed);}else{if(effect.showEffect!=='show')$newContent[effect.showEffect](effect.showSpeed);}if($newContent.parents('html').length)$newContent.each((index,element)=>{if(element.nodeType===Node.ELEMENT_NODE)Drupal.attachBehaviors(element,settings);});},remove(ajax,response,status){const settings=response.settings||ajax.settings||drupalSettings;$(response.selector).each(function(){Drupal.detachBehaviors(this,settings);}).remove();},changed(ajax,response,status){const $element=$(response.selector);if(!$element.hasClass('ajax-changed')){$element.addClass('ajax-changed');if(response.asterisk)$element.find(response.asterisk).append(` <abbr class="ajax-changed" title="${Drupal.t('Changed')}">*</abbr> `);}},alert(ajax,response,status){window.alert(response.text);},announce(ajax,response){if(response.priority)Drupal.announce(response.text,response.priority);else Drupal.announce(response.text);},redirect(ajax,response,status){window.location=response.url;},css(ajax,response,status){$(response.selector).css(response.argument);},settings(ajax,response,status){const ajaxSettings=drupalSettings.ajax;if(ajaxSettings)Drupal.ajax.expired().forEach((instance)=>{if(instance.selector){const selector=instance.selector.replace('#','');if(selector in ajaxSettings)delete ajaxSettings[selector];}});if(response.merge)$.extend(true,drupalSettings,response.settings);else ajax.settings=response.settings;},data(ajax,response,status){$(response.selector).data(response.name,response.value);},focusFirst(ajax,response,status){let focusChanged=false;const container=document.querySelector(response.selector);if(container){const tabbableElements=tabbable(container);if(tabbableElements.length){tabbableElements[0].focus();focusChanged=true;}else{if(isFocusable(container)){container.focus();focusChanged=true;}}}if(ajax.hasOwnProperty('element')&&!focusChanged)ajax.element.focus();},invoke(ajax,response,status){const $element=$(response.selector);$element[response.method](...response.args);},restripe(ajax,response,status){$(response.selector).find('> tbody > tr:visible, > tr:visible').removeClass('odd even').filter(':even').addClass('odd').end().filter(':odd').addClass('even');},update_build_id(ajax,response,status){document.querySelectorAll(`input[name="form_build_id"][value="${response.old}"]`).forEach((item)=>{item.value=response.new;});},add_css(ajax,response,status){if(typeof response.data==='string'){Drupal.deprecationError({message:'Passing a string to the Drupal.ajax.add_css() method is deprecated in 10.1.0 and is removed from drupal:11.0.0. See https://www.drupal.org/node/3154948.'});$('head').prepend(response.data);return;}const allUniqueBundleIds=response.data.map(function(style){const uniqueBundleId=style.href+ajax.instanceIndex;loadjs(`css!${style.href}`,uniqueBundleId,{before(path,styleEl){Object.keys(style).forEach((attributeKey)=>{styleEl.setAttribute(attributeKey,style[attributeKey]);});}});return uniqueBundleId;});return new Promise((resolve,reject)=>{loadjs.ready(allUniqueBundleIds,{success(){resolve();},error(depsNotFound){const message=Drupal.t(`The following files could not be loaded: @dependencies`,{'@dependencies':depsNotFound.join(', ')});reject(message);}});});},message(ajax,response){const messages=new Drupal.Message(document.querySelector(response.messageWrapperQuerySelector));if(response.clearPrevious)messages.clear();messages.add(response.message,response.messageOptions);},add_js(ajax,response,status){const parentEl=document.querySelector(response.selector||'body');const settings=ajax.settings||drupalSettings;const allUniqueBundleIds=response.data.map((script)=>{const uniqueBundleId=script.src+ajax.instanceIndex;loadjs(script.src,uniqueBundleId,{async:false,before(path,scriptEl){Object.keys(script).forEach((attributeKey)=>{scriptEl.setAttribute(attributeKey,script[attributeKey]);});parentEl.appendChild(scriptEl);return false;}});return uniqueBundleId;});return new Promise((resolve,reject)=>{loadjs.ready(allUniqueBundleIds,{success(){Drupal.attachBehaviors(parentEl,settings);resolve();},error(depsNotFound){const message=Drupal.t(`The following files could not be loaded: @dependencies`,{'@dependencies':depsNotFound.join(', ')});reject(message);}});});},scrollTop(ajax,response){const offset=$(response.selector).offset();let scrollTarget=response.selector;while($(scrollTarget).scrollTop()===0&&$(scrollTarget).parent())scrollTarget=$(scrollTarget).parent();if(offset.top-10<$(scrollTarget).scrollTop())$(scrollTarget).animate({scrollTop:offset.top-10},500);}};const stopEvent=(xhr,settings)=>{return(xhr.getResponseHeader('X-Drupal-Ajax-Token')==='1'&&settings.isInProgress&&settings.isInProgress());};$.extend(true,$.event.special,{ajaxSuccess:{trigger(event,xhr,settings){if(stopEvent(xhr,settings))return false;}},ajaxComplete:{trigger(event,xhr,settings){if(stopEvent(xhr,settings)){$.active++;return false;}}}});})(jQuery,window,Drupal,drupalSettings,loadjs,window.tabbable);;(function(Drupal){Drupal.theme.ajaxProgressBar=function($element){return $element.addClass('ajax-progress ajax-progress-bar');};})(Drupal);;(function($,Drupal,debounce){const cache={right:0,left:0,bottom:0,top:0};const cssVarPrefix='--drupal-displace-offset';const documentStyle=document.documentElement.style;const offsetKeys=Object.keys(cache);const offsetProps={};offsetKeys.forEach((edge)=>{offsetProps[edge]={enumerable:true,get(){return cache[edge];},set(value){if(value!==cache[edge])documentStyle.setProperty(`${cssVarPrefix}-${edge}`,`${value}px`);cache[edge]=value;}};});const offsets=Object.seal(Object.defineProperties({},offsetProps));function getRawOffset(el,edge){const $el=$(el);const documentElement=document.documentElement;let displacement=0;const horizontal=edge==='left'||edge==='right';let placement=$el.offset()[horizontal?'left':'top'];placement-=window[`scroll${horizontal?'X':'Y'}`]||document.documentElement[`scroll${horizontal?'Left':'Top'}`]||0;switch(edge){case 'top':displacement=placement+$el.outerHeight();break;case 'left':displacement=placement+$el.outerWidth();break;case 'bottom':displacement=documentElement.clientHeight-placement;break;case 'right':displacement=documentElement.clientWidth-placement;break;default:displacement=0;}return displacement;}function calculateOffset(edge){let edgeOffset=0;const displacingElements=document.querySelectorAll(`[data-offset-${edge}]`);const n=displacingElements.length;for(let i=0;i<n;i++){const el=displacingElements[i];if(el.style.display==='none')continue;let displacement=parseInt(el.getAttribute(`data-offset-${edge}`),10);if(isNaN(displacement))displacement=getRawOffset(el,edge);edgeOffset=Math.max(edgeOffset,displacement);}return edgeOffset;}function displace(broadcast=true){const newOffsets={};offsetKeys.forEach((edge)=>{newOffsets[edge]=calculateOffset(edge);});offsetKeys.forEach((edge)=>{offsets[edge]=newOffsets[edge];});if(broadcast)$(document).trigger('drupalViewportOffsetChange',offsets);return offsets;}Drupal.behaviors.drupalDisplace={attach(){if(this.displaceProcessed)return;this.displaceProcessed=true;$(window).on('resize.drupalDisplace',debounce(displace,200));}};Drupal.displace=displace;Object.defineProperty(Drupal.displace,'offsets',{value:offsets,writable:false});Drupal.displace.calculateOffset=calculateOffset;})(jQuery,Drupal,Drupal.debounce);;(($,Drupal,{isTabbable})=>{$.extend($.expr[':'],{tabbable(element){Drupal.deprecationError({message:'The :tabbable selector is deprecated in Drupal 9.2.0 and will be removed in Drupal 11.0.0. Use the core/tabbable library instead. See https://www.drupal.org/node/3183730'});return isTabbable(element);}});})(jQuery,Drupal,window.tabbable);;(($)=>{let cachedScrollbarWidth=null;const{max,abs}=Math;const regexHorizontal=/left|center|right/;const regexVertical=/top|center|bottom/;const regexOffset=/[+-]\d+(\.[\d]+)?%?/;const regexPosition=/^\w+/;const regexPercent=/%$/;const _position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(regexPercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(regexPercent.test(offsets[1])?height/100:1)];}function parseCss(element,property){return parseInt(window.getComputedStyle(element)[property],10)||0;}function getDimensions(elem){const raw=elem[0];if(raw.nodeType===9)return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};if($.isWindow(raw))return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};if(raw.preventDefault)return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}const collisions={fit:{left(position,data){const{within}=data;const withinOffset=within.isWindow?within.scrollLeft:within.offset.left;const outerWidth=within.width;const collisionPosLeft=position.left-data.collisionPosition.marginLeft;const overLeft=withinOffset-collisionPosLeft;const overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;let newOverRight;if(data.collisionWidth>outerWidth)if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else if(overRight>0&&overLeft<=0)position.left=withinOffset;else if(overLeft>overRight)position.left=withinOffset+outerWidth-data.collisionWidth;else position.left=withinOffset;else if(overLeft>0)position.left+=overLeft;else if(overRight>0)position.left-=overRight;else position.left=max(position.left-collisionPosLeft,position.left);},top(position,data){const{within}=data;const withinOffset=within.isWindow?within.scrollTop:within.offset.top;const outerHeight=data.within.height;const collisionPosTop=position.top-data.collisionPosition.marginTop;const overTop=withinOffset-collisionPosTop;const overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;let newOverBottom;if(data.collisionHeight>outerHeight)if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom>0&&overTop<=0)position.top=withinOffset;else if(overTop>overBottom)position.top=withinOffset+outerHeight-data.collisionHeight;else position.top=withinOffset;else if(overTop>0)position.top+=overTop;else if(overBottom>0)position.top-=overBottom;else position.top=max(position.top-collisionPosTop,position.top);}},flip:{left(position,data){const{within}=data;const withinOffset=within.offset.left+within.scrollLeft;const outerWidth=within.width;const offsetLeft=within.isWindow?within.scrollLeft:within.offset.left;const collisionPosLeft=position.left-data.collisionPosition.marginLeft;const overLeft=collisionPosLeft-offsetLeft;const overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft;const myOffset=data.my[0]==='left'?-data.elemWidth:data.my[0]==='right'?data.elemWidth:0;const atOffset=data.at[0]==='left'?data.targetWidth:data.at[0]==='right'?-data.targetWidth:0;const offset=-2*data.offset[0];let newOverRight;let newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft))position.left+=myOffset+atOffset+offset;}else{if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight)position.left+=myOffset+atOffset+offset;}}},top(position,data){const{within}=data;const withinOffset=within.offset.top+within.scrollTop;const outerHeight=within.height;const offsetTop=within.isWindow?within.scrollTop:within.offset.top;const collisionPosTop=position.top-data.collisionPosition.marginTop;const overTop=collisionPosTop-offsetTop;const overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop;const top=data.my[1]==='top';const myOffset=top?-data.elemHeight:data.my[1]==='bottom'?data.elemHeight:0;const atOffset=data.at[1]==='top'?data.targetHeight:data.at[1]==='bottom'?-data.targetHeight:0;const offset=-2*data.offset[1];let newOverTop;let newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop))position.top+=myOffset+atOffset+offset;}else{if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom)position.top+=myOffset+atOffset+offset;}}}},flipfit:{left(...args){collisions.flip.left.apply(this,args);collisions.fit.left.apply(this,args);},top(...args){collisions.flip.top.apply(this,args);collisions.fit.top.apply(this,args);}}};$.position={scrollbarWidth(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;const div=$('<div '+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>"+"<div style='height:100px;width:auto;'></div></div>");const innerDiv=div.children()[0];$('body').append(div);const w1=innerDiv.offsetWidth;div[0].style.overflow='scroll';let w2=innerDiv.offsetWidth;if(w1===w2)w2=div[0].clientWidth;div.remove();cachedScrollbarWidth=w1-w2;return cachedScrollbarWidth;},getScrollInfo(within){const overflowX=within.isWindow||within.isDocument?'':window.getComputedStyle(within.element[0])['overflow-x'];const overflowY=within.isWindow||within.isDocument?'':window.getComputedStyle(within.element[0])['overflow-y'];const hasOverflowX=overflowX==='scroll'||(overflowX==='auto'&&within.width<within.element[0].scrollWidth);const hasOverflowY=overflowY==='scroll'||(overflowY==='auto'&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo(element){const withinElement=$(element||window);const isWindow=$.isWindow(withinElement[0]);const isDocument=!!withinElement[0]&&withinElement[0].nodeType===9;const hasOffset=!isWindow&&!isDocument;return{element:withinElement,isWindow,isDocument,offset:hasOffset?$(element).offset():{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:withinElement.outerWidth(),height:withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);const within=$.position.getWithinInfo(options.within);const scrollInfo=$.position.getScrollInfo(within);const collision=(options.collision||'flip').split(' ');const offsets={};const target=typeof options.of==='string'?$(document).find(options.of):$(options.of);const dimensions=getDimensions(target);const targetWidth=dimensions.width;const targetHeight=dimensions.height;const targetOffset=dimensions.offset;if(target[0].preventDefault)options.at='left top';const basePosition=$.extend({},targetOffset);$.each(['my','at'],function(){let pos=(options[this]||'').split(' ');if(pos.length===1)pos=regexHorizontal.test(pos[0])?pos.concat(['center']):regexVertical.test(pos[0])?['center'].concat(pos):['center','center'];pos[0]=regexHorizontal.test(pos[0])?pos[0]:'center';pos[1]=regexVertical.test(pos[1])?pos[1]:'center';const horizontalOffset=regexOffset.exec(pos[0]);const verticalOffset=regexOffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[regexPosition.exec(pos[0])[0],regexPosition.exec(pos[1])[0]];});if(collision.length===1)collision[1]=collision[0];if(options.at[0]==='right')basePosition.left+=targetWidth;else{if(options.at[0]==='center')basePosition.left+=targetWidth/2;}if(options.at[1]==='bottom')basePosition.top+=targetHeight;else{if(options.at[1]==='center')basePosition.top+=targetHeight/2;}const atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){let using;const elem=$(this);const elemWidth=elem.outerWidth();const elemHeight=elem.outerHeight();const marginLeft=parseCss(this,'marginLeft');const marginTop=parseCss(this,'marginTop');const collisionWidth=elemWidth+marginLeft+parseCss(this,'marginRight')+scrollInfo.width;const collisionHeight=elemHeight+marginTop+parseCss(this,'marginBottom')+scrollInfo.height;const position=$.extend({},basePosition);const myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==='right')position.left-=elemWidth;else{if(options.my[0]==='center')position.left-=elemWidth/2;}if(options.my[1]==='bottom')position.top-=elemHeight;else{if(options.my[1]==='center')position.top-=elemHeight/2;}position.left+=myOffset[0];position.top+=myOffset[1];const collisionPosition={marginLeft,marginTop};$.each(['left','top'],function(i,dir){if(collisions[collision[i]])collisions[collision[i]][dir](position,{targetWidth,targetHeight,elemWidth,elemHeight,collisionPosition,collisionWidth,collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within,elem});});if(options.using)using=function(props){const left=targetOffset.left-position.left;const right=left+targetWidth-elemWidth;const top=targetOffset.top-position.top;const bottom=top+targetHeight-elemHeight;const feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?'left':left>0?'right':'center',vertical:bottom<0?'top':top>0?'bottom':'middle'};if(targetWidth<elemWidth&&abs(left+right)<targetWidth)feedback.horizontal='center';if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight)feedback.vertical='middle';if(max(abs(left),abs(right))>max(abs(top),abs(bottom)))feedback.important='horizontal';else feedback.important='vertical';options.using.call(this,props,feedback);};elem.offset($.extend(position,{using}));});};if(!$.hasOwnProperty('ui'))$.ui={};$.ui.position=collisions;})(jQuery);;(function($,Drupal,drupalSettings,bodyScrollLock){drupalSettings.dialog={autoOpen:true,dialogClass:'',buttonClass:'button',buttonPrimaryClass:'button--primary',close(event){Drupal.dialog(event.target).close();Drupal.detachBehaviors(event.target,null,'unload');}};Drupal.dialog=function(element,options){let undef;const $element=$(element);const dialog={open:false,returnValue:undef};function openDialog(settings){settings=$.extend({},drupalSettings.dialog,options,settings);$(window).trigger('dialog:beforecreate',[dialog,$element,settings]);$element.dialog(settings);dialog.open=true;if(settings.modal)bodyScrollLock.lock($element.get(0));$(window).trigger('dialog:aftercreate',[dialog,$element,settings]);}function closeDialog(value){$(window).trigger('dialog:beforeclose',[dialog,$element]);bodyScrollLock.clearBodyLocks();$element.dialog('close');dialog.returnValue=value;dialog.open=false;$(window).trigger('dialog:afterclose',[dialog,$element]);}dialog.show=()=>{openDialog({modal:false});};dialog.showModal=()=>{openDialog({modal:true});};dialog.close=closeDialog;return dialog;};})(jQuery,Drupal,drupalSettings,bodyScrollLock);;(function($,Drupal,drupalSettings,debounce,displace){drupalSettings.dialog=$.extend({autoResize:true,maxHeight:'95%'},drupalSettings.dialog);function resetPosition(options){const offsets=displace.offsets;const left=offsets.left-offsets.right;const top=offsets.top-offsets.bottom;const leftString=`${(left>0?'+':'-')+Math.abs(Math.round(left/2))}px`;const topString=`${(top>0?'+':'-')+Math.abs(Math.round(top/2))}px`;options.position={my:`center${left!==0?leftString:''} center${top!==0?topString:''}`,of:window};return options;}function resetSize(event){const positionOptions=['width','height','minWidth','minHeight','maxHeight','maxWidth','position'];let adjustedOptions={};let windowHeight=$(window).height();let option;let optionValue;let adjustedValue;for(let n=0;n<positionOptions.length;n++){option=positionOptions[n];optionValue=event.data.settings[option];if(optionValue)if(typeof optionValue==='string'&&/%$/.test(optionValue)&&/height/i.test(option)){windowHeight-=displace.offsets.top+displace.offsets.bottom;adjustedValue=parseInt(0.01*parseInt(optionValue,10)*windowHeight,10);if(option==='height'&&event.data.$element.parent().outerHeight()<adjustedValue)adjustedValue='auto';adjustedOptions[option]=adjustedValue;}}if(!event.data.settings.modal)adjustedOptions=resetPosition(adjustedOptions);event.data.$element.dialog('option',adjustedOptions).trigger('dialogContentResize');}$(window).on({'dialog:aftercreate':function(event,dialog,$element,settings){const autoResize=debounce(resetSize,20);const eventData={settings,$element};if(settings.autoResize===true||settings.autoResize==='true'){const uiDialog=$element.dialog('option',{resizable:false,draggable:false}).dialog('widget');uiDialog[0].style.position='fixed';$(window).on('resize.dialogResize scroll.dialogResize',eventData,autoResize).trigger('resize.dialogResize');$(document).on('drupalViewportOffsetChange.dialogResize',eventData,autoResize);}},'dialog:beforeclose':function(event,dialog,$element){$(window).off('.dialogResize');$(document).off('.dialogResize');}});})(jQuery,Drupal,drupalSettings,Drupal.debounce,Drupal.displace);;(function($,{tabbable,isTabbable}){$.widget('ui.dialog',$.ui.dialog,{options:{buttonClass:'button',buttonPrimaryClass:'button--primary'},_createButtons(){const opts=this.options;let primaryIndex;let index;const il=opts.buttons.length;for(index=0;index<il;index++)if(opts.buttons[index].primary&&opts.buttons[index].primary===true){primaryIndex=index;delete opts.buttons[index].primary;break;}this._super();const $buttons=this.uiButtonSet.children().addClass(opts.buttonClass);if(typeof primaryIndex!=='undefined')$buttons.eq(index).addClass(opts.buttonPrimaryClass);},_focusTabbable(){let hasFocus=this._focusedElement?this._focusedElement.get(0):null;if(!hasFocus)hasFocus=this.element.find('[autofocus]').get(0);if(!hasFocus){const $elements=[this.element,this.uiDialogButtonPane];for(let i=0;i<$elements.length;i++){const element=$elements[i].get(0);if(element){const elementTabbable=tabbable(element);hasFocus=elementTabbable.length?elementTabbable[0]:null;}if(hasFocus)break;}}if(!hasFocus){const closeBtn=this.uiDialogTitlebarClose.get(0);hasFocus=closeBtn&&isTabbable(closeBtn)?closeBtn:null;}if(!hasFocus)hasFocus=this.uiDialog.get(0);$(hasFocus).eq(0).trigger('focus');}});})(jQuery,window.tabbable);;(function($,Drupal,{focusable}){Drupal.behaviors.dialog={attach(context,settings){const $context=$(context);if(!$('#drupal-modal').length)$('<div id="drupal-modal" class="ui-front"></div>').hide().appendTo('body');const $dialog=$context.closest('.ui-dialog-content');if($dialog.length){if($dialog.dialog('option','drupalAutoButtons'))$dialog.trigger('dialogButtonsChange');setTimeout(function(){if(!$dialog[0].contains(document.activeElement)){$dialog.dialog('instance')._focusedElement=null;$dialog.dialog('instance')._focusTabbable();}},0);}const originalClose=settings.dialog.close;settings.dialog.close=function(event,...args){originalClose.apply(settings.dialog,[event,...args]);const $element=$(event.target);const ajaxContainer=$element.data('uiDialog')?$element.data('uiDialog').opener.closest('[data-drupal-ajax-container]'):[];if(ajaxContainer.length&&(document.activeElement===document.body||$(document.activeElement).not(':visible'))){const focusableChildren=focusable(ajaxContainer[0]);if(focusableChildren.length>0)setTimeout(()=>{focusableChildren[0].focus();},0);}$(event.target).remove();};},prepareDialogButtons($dialog){const buttons=[];const $buttons=$dialog.find('.form-actions input[type=submit], .form-actions a.button, .form-actions a.action-link');$buttons.each(function(){const $originalButton=$(this);this.style.display='none';buttons.push({text:$originalButton.html()||$originalButton.attr('value'),class:$originalButton.attr('class'),'data-once':$originalButton.data('once'),click(e){if($originalButton[0].tagName==='A')$originalButton[0].click();else $originalButton.trigger('mousedown').trigger('mouseup').trigger('click');e.preventDefault();}});});return buttons;}};Drupal.AjaxCommands.prototype.openDialog=function(ajax,response,status){if(!response.selector)return false;let $dialog=$(response.selector);if(!$dialog.length)$dialog=$(`<div id="${response.selector.replace(/^#/,'')}" class="ui-front"></div>`).appendTo('body');if(!ajax.wrapper)ajax.wrapper=$dialog.attr('id');response.command='insert';response.method='html';ajax.commands.insert(ajax,response,status);response.dialogOptions=response.dialogOptions||{};if(typeof response.dialogOptions.drupalAutoButtons==='undefined')response.dialogOptions.drupalAutoButtons=true;else if(response.dialogOptions.drupalAutoButtons==='false')response.dialogOptions.drupalAutoButtons=false;else response.dialogOptions.drupalAutoButtons=!!response.dialogOptions.drupalAutoButtons;if(!response.dialogOptions.buttons&&response.dialogOptions.drupalAutoButtons)response.dialogOptions.buttons=Drupal.behaviors.dialog.prepareDialogButtons($dialog);$dialog.on('dialogButtonsChange',()=>{const buttons=Drupal.behaviors.dialog.prepareDialogButtons($dialog);$dialog.dialog('option','buttons',buttons);});response.dialogOptions=response.dialogOptions||{};const dialog=Drupal.dialog($dialog.get(0),response.dialogOptions);if(response.dialogOptions.modal)dialog.showModal();else dialog.show();$dialog.parent().find('.ui-dialog-buttonset').addClass('form-actions');};Drupal.AjaxCommands.prototype.closeDialog=function(ajax,response,status){const $dialog=$(response.selector);if($dialog.length){Drupal.dialog($dialog.get(0)).close();if(!response.persist)$dialog.remove();}$dialog.off('dialogButtonsChange');};Drupal.AjaxCommands.prototype.setDialogOption=function(ajax,response,status){const $dialog=$(response.selector);if($dialog.length)$dialog.dialog('option',response.optionName,response.optionValue);};$(window).on('dialog:aftercreate',(e,dialog,$element,settings)=>{$element.on('click.dialog','.dialog-cancel',(e)=>{dialog.close('cancel');e.preventDefault();e.stopPropagation();});});$(window).on('dialog:beforeclose',(e,dialog,$element)=>{$element.off('.dialog');});})(jQuery,Drupal,window.tabbable);;!function(d){d.fakeLoader=function(i){var s=d.extend({targetClass:"fakeLoader",timeToHide:1200,bgColor:"#2ecc71",spinner:"spinner2"},i),c='<div class="fl fl-spinner spinner1"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>',e=d("body").find("."+s.targetClass);e.each(function(){switch(s.spinner){case "spinner1":e.html(c);break;case "spinner2":e.html('<div class="fl fl-spinner spinner2"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div>');break;case "spinner3":e.html('<div class="fl fl-spinner spinner3"><div class="dot1"></div><div class="dot2"></div></div>');break;case "spinner4":e.html('<div class="fl fl-spinner spinner4"></div>');break;case "spinner5":e.html('<div class="fl fl-spinner spinner5"><div class="cube1"></div><div class="cube2"></div></div>');break;case "spinner6":e.html('<div class="fl fl-spinner spinner6"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>');break;case "spinner7":e.html('<div class="fl fl-spinner spinner7"><div class="circ1"></div><div class="circ2"></div><div class="circ3"></div><div class="circ4"></div></div>');break;default:e.html(c);}}),e.css({backgroundColor:s.bgColor}),setTimeout(function(){d(e).fadeOut();},s.timeToHide);};}(jQuery);;(function(factory){if(typeof define==="function"&&define.amd)define(["jquery"],factory);else if(typeof module==="object"&&module.exports)module.exports=function(root,jQuery){if(jQuery===undefined)if(typeof window!=="undefined")jQuery=require("jquery");else jQuery=require("jquery")(root);factory(jQuery);return jQuery;};else factory(jQuery);}(function($){var w=window;$.fn.confirm=function(options,option2){if(typeof options==="undefined")options={};if(typeof options==="string")options={content:options,title:(option2)?option2:false};$(this).each(function(){var $this=$(this);if($this.attr("jc-attached")){console.warn("jConfirm has already been attached to this element ",$this[0]);return;}$this.on("click",function(e){e.preventDefault();var jcOption=$.extend({},options);if($this.attr("data-title"))jcOption.title=$this.attr("data-title");if($this.attr("data-content"))jcOption.content=$this.attr("data-content");if(typeof jcOption.buttons==="undefined")jcOption.buttons={};jcOption["$target"]=$this;if($this.attr("href")&&Object.keys(jcOption.buttons).length===0){var buttons=$.extend(true,{},w.jconfirm.pluginDefaults.defaultButtons,(w.jconfirm.defaults||{}).defaultButtons||{});var firstBtn=Object.keys(buttons)[0];jcOption.buttons=buttons;jcOption.buttons[firstBtn].action=function(){location.href=$this.attr("href");};}jcOption.closeIcon=false;var instance=$.confirm(jcOption);});$this.attr("jc-attached",true);});return $(this);};$.confirm=function(options,option2){if(typeof options==="undefined")options={};if(typeof options==="string")options={content:options,title:(option2)?option2:false};var putDefaultButtons=!(options.buttons===false);if(typeof options.buttons!=="object")options.buttons={};if(Object.keys(options.buttons).length===0&&putDefaultButtons){var buttons=$.extend(true,{},w.jconfirm.pluginDefaults.defaultButtons,(w.jconfirm.defaults||{}).defaultButtons||{});options.buttons=buttons;}return w.jconfirm(options);};$.alert=function(options,option2){if(typeof options==="undefined")options={};if(typeof options==="string")options={content:options,title:(option2)?option2:false};var putDefaultButtons=!(options.buttons===false);if(typeof options.buttons!=="object")options.buttons={};if(Object.keys(options.buttons).length===0&&putDefaultButtons){var buttons=$.extend(true,{},w.jconfirm.pluginDefaults.defaultButtons,(w.jconfirm.defaults||{}).defaultButtons||{});var firstBtn=Object.keys(buttons)[0];options.buttons[firstBtn]=buttons[firstBtn];}return w.jconfirm(options);};$.dialog=function(options,option2){if(typeof options==="undefined")options={};if(typeof options==="string")options={content:options,title:(option2)?option2:false,closeIcon:function(){}};options.buttons={};if(typeof options.closeIcon==="undefined")options.closeIcon=function(){};options.confirmKeys=[13];return w.jconfirm(options);};w.jconfirm=function(options){if(typeof options==="undefined")options={};var pluginOptions=$.extend(true,{},w.jconfirm.pluginDefaults);if(w.jconfirm.defaults)pluginOptions=$.extend(true,pluginOptions,w.jconfirm.defaults);pluginOptions=$.extend(true,{},pluginOptions,options);var instance=new w.Jconfirm(pluginOptions);w.jconfirm.instances.push(instance);return instance;};w.Jconfirm=function(options){$.extend(this,options);this._init();};w.Jconfirm.prototype={_init:function(){var that=this;if(!w.jconfirm.instances.length)w.jconfirm.lastFocused=$("body").find(":focus");this._id=Math.round(Math.random()*99999);this.contentParsed=$(document.createElement("div"));if(!this.lazyOpen)setTimeout(function(){that.open();},0);},_buildHTML:function(){var that=this;this._parseAnimation(this.animation,"o");this._parseAnimation(this.closeAnimation,"c");this._parseBgDismissAnimation(this.backgroundDismissAnimation);this._parseColumnClass(this.columnClass);this._parseTheme(this.theme);this._parseType(this.type);var template=$(this.template);template.find(".jconfirm-box").addClass(this.animationParsed).addClass(this.backgroundDismissAnimationParsed).addClass(this.typeParsed);if(this.typeAnimated)template.find(".jconfirm-box").addClass("jconfirm-type-animated");if(this.useBootstrap){template.find(".jc-bs3-row").addClass(this.bootstrapClasses.row);template.find(".jc-bs3-row").addClass("justify-content-md-center justify-content-sm-center justify-content-xs-center justify-content-lg-center");template.find(".jconfirm-box-container").addClass(this.columnClassParsed);if(this.containerFluid)template.find(".jc-bs3-container").addClass(this.bootstrapClasses.containerFluid);else template.find(".jc-bs3-container").addClass(this.bootstrapClasses.container);}else template.find(".jconfirm-box").css("width",this.boxWidth);if(this.titleClass)template.find(".jconfirm-title-c").addClass(this.titleClass);template.addClass(this.themeParsed);var ariaLabel="jconfirm-box"+this._id;template.find(".jconfirm-box").attr("aria-labelledby",ariaLabel).attr("tabindex",-1);template.find(".jconfirm-content").attr("id",ariaLabel);if(this.bgOpacity!==null)template.find(".jconfirm-bg").css("opacity",this.bgOpacity);if(this.rtl)template.addClass("jconfirm-rtl");this.$el=template.appendTo(this.container);this.$jconfirmBoxContainer=this.$el.find(".jconfirm-box-container");this.$jconfirmBox=this.$body=this.$el.find(".jconfirm-box");this.$jconfirmBg=this.$el.find(".jconfirm-bg");this.$title=this.$el.find(".jconfirm-title");this.$titleContainer=this.$el.find(".jconfirm-title-c");this.$content=this.$el.find("div.jconfirm-content");this.$contentPane=this.$el.find(".jconfirm-content-pane");this.$icon=this.$el.find(".jconfirm-icon-c");this.$closeIcon=this.$el.find(".jconfirm-closeIcon");this.$holder=this.$el.find(".jconfirm-holder");this.$btnc=this.$el.find(".jconfirm-buttons");this.$scrollPane=this.$el.find(".jconfirm-scrollpane");that.setStartingPoint();this._contentReady=$.Deferred();this._modalReady=$.Deferred();this.$holder.css({"padding-top":this.offsetTop,"padding-bottom":this.offsetBottom});this.setTitle();this.setIcon();this._setButtons();this._parseContent();this.initDraggable();if(this.isAjax)this.showLoading(false);$.when(this._contentReady,this._modalReady).then(function(){if(that.isAjaxLoading)setTimeout(function(){that.isAjaxLoading=false;that.setContent();that.setTitle();that.setIcon();setTimeout(function(){that.hideLoading(false);that._updateContentMaxHeight();},100);if(typeof that.onContentReady==="function")that.onContentReady();},50);else{that._updateContentMaxHeight();that.setTitle();that.setIcon();if(typeof that.onContentReady==="function")that.onContentReady();}if(that.autoClose)that._startCountDown();}).then(function(){that._watchContent();});if(this.animation==="none"){this.animationSpeed=1;this.animationBounce=1;}this.$body.css(this._getCSS(this.animationSpeed,this.animationBounce));this.$contentPane.css(this._getCSS(this.animationSpeed,1));this.$jconfirmBg.css(this._getCSS(this.animationSpeed,1));this.$jconfirmBoxContainer.css(this._getCSS(this.animationSpeed,1));},_typePrefix:"jconfirm-type-",typeParsed:"",_parseType:function(type){this.typeParsed=this._typePrefix+type;},setType:function(type){var oldClass=this.typeParsed;this._parseType(type);this.$jconfirmBox.removeClass(oldClass).addClass(this.typeParsed);},themeParsed:"",_themePrefix:"jconfirm-",setTheme:function(theme){var previous=this.theme;this.theme=theme||this.theme;this._parseTheme(this.theme);if(previous)this.$el.removeClass(previous);this.$el.addClass(this.themeParsed);this.theme=theme;},_parseTheme:function(theme){var that=this;theme=theme.split(",");$.each(theme,function(k,a){if(a.indexOf(that._themePrefix)===-1)theme[k]=that._themePrefix+$.trim(a);});this.themeParsed=theme.join(" ").toLowerCase();},backgroundDismissAnimationParsed:"",_bgDismissPrefix:"jconfirm-hilight-",_parseBgDismissAnimation:function(bgDismissAnimation){var animation=bgDismissAnimation.split(",");var that=this;$.each(animation,function(k,a){if(a.indexOf(that._bgDismissPrefix)===-1)animation[k]=that._bgDismissPrefix+$.trim(a);});this.backgroundDismissAnimationParsed=animation.join(" ").toLowerCase();},animationParsed:"",closeAnimationParsed:"",_animationPrefix:"jconfirm-animation-",setAnimation:function(animation){this.animation=animation||this.animation;this._parseAnimation(this.animation,"o");},_parseAnimation:function(animation,which){which=which||"o";var animations=animation.split(",");var that=this;$.each(animations,function(k,a){if(a.indexOf(that._animationPrefix)===-1)animations[k]=that._animationPrefix+$.trim(a);});var a_string=animations.join(" ").toLowerCase();if(which==="o")this.animationParsed=a_string;else this.closeAnimationParsed=a_string;return a_string;},setCloseAnimation:function(closeAnimation){this.closeAnimation=closeAnimation||this.closeAnimation;this._parseAnimation(this.closeAnimation,"c");},setAnimationSpeed:function(speed){this.animationSpeed=speed||this.animationSpeed;},columnClassParsed:"",setColumnClass:function(colClass){if(!this.useBootstrap){console.warn("cannot set columnClass, useBootstrap is set to false");return;}this.columnClass=colClass||this.columnClass;this._parseColumnClass(this.columnClass);this.$jconfirmBoxContainer.addClass(this.columnClassParsed);},_updateContentMaxHeight:function(){var height=$(window).height()-(this.$jconfirmBox.outerHeight()-this.$contentPane.outerHeight())-(this.offsetTop+this.offsetBottom);this.$contentPane.css({"max-height":height+"px"});},setBoxWidth:function(width){if(this.useBootstrap){console.warn("cannot set boxWidth, useBootstrap is set to true");return;}this.boxWidth=width;this.$jconfirmBox.css("width",width);},_parseColumnClass:function(colClass){colClass=colClass.toLowerCase();var p;switch(colClass){case "xl":case "xlarge":p="col-md-12";break;case "l":case "large":p="col-md-8 col-md-offset-2";break;case "m":case "medium":p="col-md-6 col-md-offset-3";break;case "s":case "small":p="col-md-4 col-md-offset-4";break;case "xs":case "xsmall":p="col-md-2 col-md-offset-5";break;default:p=colClass;}this.columnClassParsed=p;},initDraggable:function(){var that=this;var $t=this.$titleContainer;this.resetDrag();if(this.draggable){$t.on("mousedown",function(e){$t.addClass("jconfirm-hand");that.mouseX=e.clientX;that.mouseY=e.clientY;that.isDrag=true;});$(window).on("mousemove."+this._id,function(e){if(that.isDrag){that.movingX=e.clientX-that.mouseX+that.initialX;that.movingY=e.clientY-that.mouseY+that.initialY;that.setDrag();}});$(window).on("mouseup."+this._id,function(){$t.removeClass("jconfirm-hand");if(that.isDrag){that.isDrag=false;that.initialX=that.movingX;that.initialY=that.movingY;}});}},resetDrag:function(){this.isDrag=false;this.initialX=0;this.initialY=0;this.movingX=0;this.movingY=0;this.mouseX=0;this.mouseY=0;this.$jconfirmBoxContainer.css("transform","translate("+0+"px, "+0+"px)");},setDrag:function(){if(!this.draggable)return;this.alignMiddle=false;var boxWidth=this.$jconfirmBox.outerWidth();var boxHeight=this.$jconfirmBox.outerHeight();var windowWidth=$(window).width();var windowHeight=$(window).height();var that=this;var dragUpdate=1;if(that.movingX%dragUpdate===0||that.movingY%dragUpdate===0){if(that.dragWindowBorder){var leftDistance=(windowWidth/2)-boxWidth/2;var topDistance=(windowHeight/2)-boxHeight/2;topDistance-=that.dragWindowGap;leftDistance-=that.dragWindowGap;if(leftDistance+that.movingX<0)that.movingX=-leftDistance;else{if(leftDistance-that.movingX<0)that.movingX=leftDistance;}if(topDistance+that.movingY<0)that.movingY=-topDistance;else{if(topDistance-that.movingY<0)that.movingY=topDistance;}}that.$jconfirmBoxContainer.css("transform","translate("+that.movingX+"px, "+that.movingY+"px)");}},_scrollTop:function(){if(typeof pageYOffset!=="undefined")return pageYOffset;else{var B=document.body;var D=document.documentElement;D=(D.clientHeight)?D:B;return D.scrollTop;}},_watchContent:function(){var that=this;if(this._timer)clearInterval(this._timer);var prevContentHeight=0;this._timer=setInterval(function(){if(that.smoothContent){var contentHeight=that.$content.outerHeight()||0;if(contentHeight!==prevContentHeight)prevContentHeight=contentHeight;var wh=$(window).height();var total=that.offsetTop+that.offsetBottom+that.$jconfirmBox.height()-that.$contentPane.height()+that.$content.height();if(total<wh)that.$contentPane.addClass("no-scroll");else that.$contentPane.removeClass("no-scroll");}},this.watchInterval);},_overflowClass:"jconfirm-overflow",_hilightAnimating:false,highlight:function(){this.hiLightModal();},hiLightModal:function(){var that=this;if(this._hilightAnimating)return;that.$body.addClass("hilight");var duration=parseFloat(that.$body.css("animation-duration"))||2;this._hilightAnimating=true;setTimeout(function(){that._hilightAnimating=false;that.$body.removeClass("hilight");},duration*1000);},_bindEvents:function(){var that=this;this.boxClicked=false;this.$scrollPane.click(function(e){if(!that.boxClicked){var buttonName=false;var shouldClose=false;var str;if(typeof that.backgroundDismiss==="function")str=that.backgroundDismiss();else str=that.backgroundDismiss;if(typeof str==="string"&&typeof that.buttons[str]!=="undefined"){buttonName=str;shouldClose=false;}else if(typeof str==="undefined"||!!(str)===true)shouldClose=true;else shouldClose=false;if(buttonName){var btnResponse=that.buttons[buttonName].action.apply(that);shouldClose=(typeof btnResponse==="undefined")||!!(btnResponse);}if(shouldClose)that.close();else that.hiLightModal();}that.boxClicked=false;});this.$jconfirmBox.click(function(e){that.boxClicked=true;});var isKeyDown=false;$(window).on("jcKeyDown."+that._id,function(e){if(!isKeyDown)isKeyDown=true;});$(window).on("keyup."+that._id,function(e){if(isKeyDown){that.reactOnKey(e);isKeyDown=false;}});$(window).on("resize."+this._id,function(){that._updateContentMaxHeight();setTimeout(function(){that.resetDrag();},100);});},_cubic_bezier:"0.36, 0.55, 0.19",_getCSS:function(speed,bounce){return{"-webkit-transition-duration":speed/1000+"s","transition-duration":speed/1000+"s","-webkit-transition-timing-function":"cubic-bezier("+this._cubic_bezier+", "+bounce+")","transition-timing-function":"cubic-bezier("+this._cubic_bezier+", "+bounce+")"};},_setButtons:function(){var that=this;var total_buttons=0;if(typeof this.buttons!=="object")this.buttons={};$.each(this.buttons,function(key,button){total_buttons+=1;if(typeof button==="function")that.buttons[key]=button={action:button};that.buttons[key].text=button.text||key;that.buttons[key].btnClass=button.btnClass||"btn-default";that.buttons[key].action=button.action||function(){};that.buttons[key].keys=button.keys||[];that.buttons[key].isHidden=button.isHidden||false;that.buttons[key].isDisabled=button.isDisabled||false;$.each(that.buttons[key].keys,function(i,a){that.buttons[key].keys[i]=a.toLowerCase();});var button_element=$('<button type="button" class="btn"></button>').html(that.buttons[key].text).addClass(that.buttons[key].btnClass).prop("disabled",that.buttons[key].isDisabled).css("display",that.buttons[key].isHidden?"none":"").click(function(e){e.preventDefault();var res=that.buttons[key].action.apply(that,[that.buttons[key]]);that.onAction.apply(that,[key,that.buttons[key]]);that._stopCountDown();if(typeof res==="undefined"||res)that.close();});that.buttons[key].el=button_element;that.buttons[key].setText=function(text){button_element.html(text);};that.buttons[key].addClass=function(className){button_element.addClass(className);};that.buttons[key].removeClass=function(className){button_element.removeClass(className);};that.buttons[key].disable=function(){that.buttons[key].isDisabled=true;button_element.prop("disabled",true);};that.buttons[key].enable=function(){that.buttons[key].isDisabled=false;button_element.prop("disabled",false);};that.buttons[key].show=function(){that.buttons[key].isHidden=false;button_element.css("display","");};that.buttons[key].hide=function(){that.buttons[key].isHidden=true;button_element.css("display","none");};that["$_"+key]=that["$$"+key]=button_element;that.$btnc.append(button_element);});if(total_buttons===0)this.$btnc.hide();if(this.closeIcon===null&&total_buttons===0)this.closeIcon=true;if(this.closeIcon){if(this.closeIconClass){var closeHtml='<i class="'+this.closeIconClass+'"></i>';this.$closeIcon.html(closeHtml);}this.$closeIcon.click(function(e){e.preventDefault();var buttonName=false;var shouldClose=false;var str;if(typeof that.closeIcon==="function")str=that.closeIcon();else str=that.closeIcon;if(typeof str==="string"&&typeof that.buttons[str]!=="undefined"){buttonName=str;shouldClose=false;}else if(typeof str==="undefined"||!!(str)===true)shouldClose=true;else shouldClose=false;if(buttonName){var btnResponse=that.buttons[buttonName].action.apply(that);shouldClose=(typeof btnResponse==="undefined")||!!(btnResponse);}if(shouldClose)that.close();});this.$closeIcon.show();}else this.$closeIcon.hide();},setTitle:function(string,force){force=force||false;if(typeof string!=="undefined")if(typeof string==="string")this.title=string;else if(typeof string==="function"){if(typeof string.promise==="function")console.error("Promise was returned from title function, this is not supported.");var response=string();if(typeof response==="string")this.title=response;else this.title=false;}else this.title=false;if(this.isAjaxLoading&&!force)return;this.$title.html(this.title||"");this.updateTitleContainer();},setIcon:function(iconClass,force){force=force||false;if(typeof iconClass!=="undefined")if(typeof iconClass==="string")this.icon=iconClass;else if(typeof iconClass==="function"){var response=iconClass();if(typeof response==="string")this.icon=response;else this.icon=false;}else this.icon=false;if(this.isAjaxLoading&&!force)return;this.$icon.html(this.icon?'<i class="'+this.icon+'"></i>':"");this.updateTitleContainer();},updateTitleContainer:function(){if(!this.title&&!this.icon)this.$titleContainer.hide();else this.$titleContainer.show();},setContentPrepend:function(content,force){if(!content)return;this.contentParsed.prepend(content);},setContentAppend:function(content){if(!content)return;this.contentParsed.append(content);},setContent:function(content,force){force=!!force;var that=this;if(content)this.contentParsed.html("").append(content);if(this.isAjaxLoading&&!force)return;this.$content.html("");this.$content.append(this.contentParsed);setTimeout(function(){that.$body.find("input[autofocus]:visible:first").focus();},100);},loadingSpinner:false,showLoading:function(disableButtons){this.loadingSpinner=true;this.$jconfirmBox.addClass("loading");if(disableButtons)this.$btnc.find("button").prop("disabled",true);},hideLoading:function(enableButtons){this.loadingSpinner=false;this.$jconfirmBox.removeClass("loading");if(enableButtons)this.$btnc.find("button").prop("disabled",false);},ajaxResponse:false,contentParsed:"",isAjax:false,isAjaxLoading:false,_parseContent:function(){var that=this;var e="&nbsp;";if(typeof this.content==="function"){var res=this.content.apply(this);if(typeof res==="string")this.content=res;else if(typeof res==="object"&&typeof res.always==="function"){this.isAjax=true;this.isAjaxLoading=true;res.always(function(data,status,xhr){that.ajaxResponse={data,status,xhr};that._contentReady.resolve(data,status,xhr);if(typeof that.contentLoaded==="function")that.contentLoaded(data,status,xhr);});this.content=e;}else this.content=e;}if(typeof this.content==="string"&&this.content.substr(0,4).toLowerCase()==="url:"){this.isAjax=true;this.isAjaxLoading=true;var u=this.content.substring(4,this.content.length);$.get(u).done(function(html){that.contentParsed.html(html);}).always(function(data,status,xhr){that.ajaxResponse={data,status,xhr};that._contentReady.resolve(data,status,xhr);if(typeof that.contentLoaded==="function")that.contentLoaded(data,status,xhr);});}if(!this.content)this.content=e;if(!this.isAjax){this.contentParsed.html(this.content);this.setContent();that._contentReady.resolve();}},_stopCountDown:function(){clearInterval(this.autoCloseInterval);if(this.$cd)this.$cd.remove();},_startCountDown:function(){var that=this;var opt=this.autoClose.split("|");if(opt.length!==2){console.error("Invalid option for autoClose. example 'close|10000'");return false;}var button_key=opt[0];var time=parseInt(opt[1]);if(typeof this.buttons[button_key]==="undefined"){console.error("Invalid button key '"+button_key+"' for autoClose");return false;}var seconds=Math.ceil(time/1000);this.$cd=$('<span class="countdown"> ('+seconds+")</span>").appendTo(this["$_"+button_key]);this.autoCloseInterval=setInterval(function(){that.$cd.html(" ("+(seconds-=1)+") ");if(seconds<=0){that["$$"+button_key].trigger("click");that._stopCountDown();}},1000);},_getKey:function(key){switch(key){case 192:return "tilde";case 13:return "enter";case 16:return "shift";case 9:return "tab";case 20:return "capslock";case 17:return "ctrl";case 91:return "win";case 18:return "alt";case 27:return "esc";case 32:return "space";}var initial=String.fromCharCode(key);if(/^[A-z0-9]+$/.test(initial))return initial.toLowerCase();else return false;},reactOnKey:function(e){var that=this;var a=$(".jconfirm");if(a.eq(a.length-1)[0]!==this.$el[0])return false;var key=e.which;if(this.$content.find(":input").is(":focus")&&/13|32/.test(key))return false;var keyChar=this._getKey(key);if(keyChar==="esc"&&this.escapeKey)if(this.escapeKey===true)this.$scrollPane.trigger("click");else{if(typeof this.escapeKey==="string"||typeof this.escapeKey==="function"){var buttonKey;if(typeof this.escapeKey==="function")buttonKey=this.escapeKey();else buttonKey=this.escapeKey;if(buttonKey)if(typeof this.buttons[buttonKey]==="undefined")console.warn("Invalid escapeKey, no buttons found with key "+buttonKey);else this["$_"+buttonKey].trigger("click");}}$.each(this.buttons,function(key,button){if(button.keys.indexOf(keyChar)!==-1)that["$_"+key].trigger("click");});},setDialogCenter:function(){console.info("setDialogCenter is deprecated, dialogs are centered with CSS3 tables");},_unwatchContent:function(){clearInterval(this._timer);},close:function(onClosePayload){var that=this;if(typeof this.onClose==="function")this.onClose(onClosePayload);this._unwatchContent();$(window).unbind("resize."+this._id);$(window).unbind("keyup."+this._id);$(window).unbind("jcKeyDown."+this._id);if(this.draggable){$(window).unbind("mousemove."+this._id);$(window).unbind("mouseup."+this._id);this.$titleContainer.unbind("mousedown");}that.$el.removeClass(that.loadedClass);$("body").removeClass("jconfirm-no-scroll-"+that._id);that.$jconfirmBoxContainer.removeClass("jconfirm-no-transition");setTimeout(function(){that.$body.addClass(that.closeAnimationParsed);that.$jconfirmBg.addClass("jconfirm-bg-h");var closeTimer=(that.closeAnimation==="none")?1:that.animationSpeed;setTimeout(function(){that.$el.remove();var l=w.jconfirm.instances;var i=w.jconfirm.instances.length-1;for(i;i>=0;i--)if(w.jconfirm.instances[i]._id===that._id)w.jconfirm.instances.splice(i,1);if(!w.jconfirm.instances.length)if(that.scrollToPreviousElement&&w.jconfirm.lastFocused&&w.jconfirm.lastFocused.length&&$.contains(document,w.jconfirm.lastFocused[0])){var $lf=w.jconfirm.lastFocused;if(that.scrollToPreviousElementAnimate){var st=$(window).scrollTop();var ot=w.jconfirm.lastFocused.offset().top;var wh=$(window).height();if(!(ot>st&&ot<(st+wh))){var scrollTo=(ot-Math.round((wh/3)));$("html, body").animate({scrollTop:scrollTo},that.animationSpeed,"swing",function(){$lf.focus();});}else $lf.focus();}else $lf.focus();w.jconfirm.lastFocused=false;}if(typeof that.onDestroy==="function")that.onDestroy();},closeTimer*0.4);},50);return true;},open:function(){if(this.isOpen())return false;this._buildHTML();this._bindEvents();this._open();return true;},setStartingPoint:function(){var el=false;if(this.animateFromElement!==true&&this.animateFromElement){el=this.animateFromElement;w.jconfirm.lastClicked=false;}else if(w.jconfirm.lastClicked&&this.animateFromElement===true){el=w.jconfirm.lastClicked;w.jconfirm.lastClicked=false;}else return false;if(!el)return false;var offset=el.offset();var iTop=el.outerHeight()/2;var iLeft=el.outerWidth()/2;iTop-=this.$jconfirmBox.outerHeight()/2;iLeft-=this.$jconfirmBox.outerWidth()/2;var sourceTop=offset.top+iTop;sourceTop=sourceTop-this._scrollTop();var sourceLeft=offset.left+iLeft;var wh=$(window).height()/2;var ww=$(window).width()/2;var targetH=wh-this.$jconfirmBox.outerHeight()/2;var targetW=ww-this.$jconfirmBox.outerWidth()/2;sourceTop-=targetH;sourceLeft-=targetW;if(Math.abs(sourceTop)>wh||Math.abs(sourceLeft)>ww)return false;this.$jconfirmBoxContainer.css("transform","translate("+sourceLeft+"px, "+sourceTop+"px)");},_open:function(){var that=this;if(typeof that.onOpenBefore==="function")that.onOpenBefore();this.$body.removeClass(this.animationParsed);this.$jconfirmBg.removeClass("jconfirm-bg-h");this.$body.focus();that.$jconfirmBoxContainer.css("transform","translate("+0+"px, "+0+"px)");setTimeout(function(){that.$body.css(that._getCSS(that.animationSpeed,1));that.$body.css({"transition-property":that.$body.css("transition-property")+", margin"});that.$jconfirmBoxContainer.addClass("jconfirm-no-transition");that._modalReady.resolve();if(typeof that.onOpen==="function")that.onOpen();that.$el.addClass(that.loadedClass);},this.animationSpeed);},loadedClass:"jconfirm-open",isClosed:function(){return!this.$el||this.$el.parent().length===0;},isOpen:function(){return!this.isClosed();},toggle:function(){if(!this.isOpen())this.open();else this.close();}};w.jconfirm.instances=[];w.jconfirm.lastFocused=false;w.jconfirm.pluginDefaults={template:'<div class="jconfirm"><div class="jconfirm-bg jconfirm-bg-h"></div><div class="jconfirm-scrollpane"><div class="jconfirm-row"><div class="jconfirm-cell"><div class="jconfirm-holder"><div class="jc-bs3-container"><div class="jc-bs3-row"><div class="jconfirm-box-container jconfirm-animated"><div class="jconfirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="jconfirm-closeIcon">&times;</div><div class="jconfirm-title-c"><span class="jconfirm-icon-c"></span><span class="jconfirm-title"></span></div><div class="jconfirm-content-pane"><div class="jconfirm-content"></div></div><div class="jconfirm-buttons"></div><div class="jconfirm-clear"></div></div></div></div></div></div></div></div></div></div>',title:"Hello",titleClass:"",type:"default",typeAnimated:true,draggable:true,dragWindowGap:15,dragWindowBorder:true,animateFromElement:true,alignMiddle:true,smoothContent:true,content:"Are you sure to continue?",buttons:{},defaultButtons:{ok:{action:function(){}},close:{action:function(){}}},contentLoaded:function(){},icon:"",lazyOpen:false,bgOpacity:null,theme:"light",animation:"scale",closeAnimation:"scale",animationSpeed:400,animationBounce:1,escapeKey:true,rtl:false,container:"body",containerFluid:false,backgroundDismiss:false,backgroundDismissAnimation:"shake",autoClose:false,closeIcon:null,closeIconClass:false,watchInterval:100,columnClass:"col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-10 col-xs-offset-1",boxWidth:"50%",scrollToPreviousElement:true,scrollToPreviousElementAnimate:true,useBootstrap:true,offsetTop:40,offsetBottom:40,bootstrapClasses:{container:"container",containerFluid:"container-fluid",row:"row"},onContentReady:function(){},onOpenBefore:function(){},onOpen:function(){},onClose:function(){},onDestroy:function(){},onAction:function(){}};var keyDown=false;$(window).on("keydown",function(e){if(!keyDown){var $target=$(e.target);var pass=false;if($target.closest(".jconfirm-box").length)pass=true;if(pass)$(window).trigger("jcKeyDown");keyDown=true;}});$(window).on("keyup",function(){keyDown=false;});w.jconfirm.lastClicked=false;$(document).on("mousedown","button, a, [jc-source]",function(){w.jconfirm.lastClicked=$(this);});}));;const voucherCartUrl='/api/v1/cart';const generateRazorpayOrderUrl='/api/v1/cart/generate-rp-order';const checkoutUrl='/api/v1/cart/checkout';const transactionCancelledUrl='/api/v1/cart/cancel-rp-order';const cartTransferUrl='/api/v1/cart/transfer/';const userCartCouponsUrl='/api/v1/vouchers?transaction_type=PURCHASE&voucher_type=GC';const getCartLoyaltyExchangeRateUrl='/api/v1/loyalty-points-value';const clientId='eea3dfb8-e8d0-494c-90b6-f1a77dd6e0f5';const clientSecret='BBQ@2023&barbequenation';let orderId;let orderItems=[];let cartCurrencyCode;let cartCurrency;let taxes;let tax_amount;let userId;let cartApplyLoyalty;let cartLoyaltyPoints;let cartLoyaltyExchangeRate;let cartLoyaltyPointsApplied;let cartLoyaltyDiscountApplied;let voucherFilters;const voucherListingUrl='/api/v1/search/vouchers';const voucherDetailUrl='/api/v1/voucher-details/';let voucherPageSize;let voucherFilterObject={};let voucherTotalElements;let voucherPageNumber;let voucherCurrentPageLength;let filterMinPriceSlider;let filterMaxPriceSlider;let filterSelectedMinPrice;let filterSelectedMaxPrice;const promotionListingUrl='/api/v1/search/promotions';let cartCouponsList=new Map();let cartAppliedCoupon;let cartTotal;function isHomePage(){return window.location.pathname==='/';}(function($,Drupal){Drupal.behaviors.bbqBooking={attach:function(context,settings){userId=settings.user.uid;}};$.fakeLoader({spinner:'spinner6',bgColor:'rgba(0, 0, 0, 0.5)'});class Voucher{constructor(voucher){this.barCode=voucher.bar_code;this.currency=voucher.currency;this.denomination=voucher.denomination;this.title=voucher.title;this.description=voucher.description;this.applicability=voucher.applicability;}}function updateCartCount(){$('#cart-count').html(orderItems.length);}function isVoucherPage(){return window.location.pathname==='/vouchers';}function isPromotionPage(){return window.location.pathname==='/promotions';}function isVoucherDetailPage(){return window.location.pathname.match(/\/(vouchers.+)/);}function getUserLoyaltyPoints(){$.get({beforeSend:function(){loaderStart();},complete:function(){loaderStop();},url:getCartLoyaltyExchangeRateUrl,data:{amount:1,currency:cartCurrency},success(data){cartLoyaltyPoints=data.available_points;cartLoyaltyExchangeRate=data.redeem_amount/data.redeemable_points;calculateLoyaltyPoints();}});}function calculateLoyaltyPoints(){if(cartLoyaltyPoints&&cartLoyaltyPoints>0&&cartLoyaltyExchangeRate){const applicableLoyaltyPoints=getCartTotal(true)/cartLoyaltyExchangeRate;if(cartLoyaltyPoints>=applicableLoyaltyPoints)cartLoyaltyPointsApplied=applicableLoyaltyPoints;else cartLoyaltyPointsApplied=cartLoyaltyPoints;cartLoyaltyDiscountApplied=cartLoyaltyPointsApplied*cartLoyaltyExchangeRate;setLoyaltyPointsHtml();}else $('#cart-loyalty-points').empty();}$(document).on('click','#apply-cart-loyalty-points',(e)=>{cartApplyLoyalty=true;setAmountDetails();});$(document).on('click','#remove-cart-loyalty-points',(e)=>{cartApplyLoyalty=false;setAmountDetails();});function setAmountDetails(){calculateLoyaltyPoints();setCartSubTotal();calculateTaxAmount();setCartTotal();}function setLoyaltyPointsHtml(){let anchorLink;let loyaltyText;let skipLoyalty=false;if(cartApplyLoyalty){anchorLink='<a href="#" class="remove-link" id="remove-cart-loyalty-points">Remove</a>';loyaltyText=Math.ceil(cartLoyaltyPointsApplied)+' Smiles applied for this transaction';}else if(getCartTotal()>0){anchorLink=`<a href="#" class="add-link" id="apply-cart-loyalty-points">Add</a>`;loyaltyText=cartCurrencyCode+cartLoyaltyDiscountApplied.toFixed(2)+' discount applicable by using '+Math.ceil(cartLoyaltyPointsApplied)+' Smiles';}else skipLoyalty=true;if(!skipLoyalty){let loyaltyHtml=`<div class="left">
                          <div class="heading">
                            <h5>BBQN Smiles</h5>
                            ${anchorLink}
                          </div>
                          <span>${loyaltyText}</span>
                          <a href="#" class="t-and-c-text">*T&Cs applicable</a>
                        </div>`;if(cartApplyLoyalty)loyaltyHtml+=`<div class="right">- ${cartCurrencyCode}${cartLoyaltyDiscountApplied.toFixed(2)}</div>`;$('#cart-loyalty-points').html(loyaltyHtml);}else $('#cart-loyalty-points').empty();}$('#cart-show-coupons').click((e)=>{$('#cart-main-info').hide();$('#cart-coupons').show();$.get({beforeSend:function(){loaderStart();},complete:function(){loaderStop();},url:userCartCouponsUrl,success(data){loadCoupons(data);}});});$(document).on('click','.t-and-c-text',(e)=>{e.preventDefault();const redirectWindow=window.open('/terms-condition','_blank');redirectWindow.location;});function loadCoupons(data){data.vouchers.forEach((coupon)=>{cartCouponsList.set(coupon.bar_code,new Voucher(coupon));});if(data.vouchers&&data.vouchers.length>0)buildCouponsHtml();else $('#cart-coupons-listing').html('<div>No coupons available.</div>');}function buildCouponsHtml(){let couponHtml='';cartCouponsList.forEach((v,k)=>{const couponItem=couponItemHtml(v.title,v.barCode,v.currency,v.denomination,getCartTotal(),v.description,v.applicability);if(couponItem)couponHtml+=couponItem;});$('#cart-coupons-listing').html(couponHtml);}function couponItemHtml(title,code,currency,amount,tempSubTotal,description,applicability){let couponClass='cart-apply-coupon';let couponText='Apply coupon';if(cartAppliedCoupon)if(code===cartAppliedCoupon){couponClass='coupon-applied';couponText='Applied';}else couponClass+=' anchor-disabled';if(amount>tempSubTotal)if(couponClass.substr(0,14)!=='coupon-applied')couponClass+=' anchor-disabled';if(!applicability)couponClass='anchor-disabled';return `<div class="coupon-card row align-center space-between">
            <div class="coupon__left">
              <div class="coupon-title">${title}</div>
              <div class="coupon-description">${getCurrencyCode(currency)}${amount.toLocaleString("en")} OFF</div>
              ${getCouponDescription(description)}
            </div>
            <div class="coupon__right">
              <div class="coupon-cta">
                <a id="${code}" class="${couponClass}" href="#">${couponText}</a>
              </div>
              <div class="coupon-code">Code:
                <span>${code}</span>
              </div>
            </div>
          </div>`;}$('.cart--curtain .close').click(function(e){$('.cart--curtain').removeClass('cart--visible');e.preventDefault();cartAppliedCoupon=undefined;cartApplyLoyalty=undefined;cartLoyaltyPointsApplied=undefined;cartLoyaltyExchangeRate=undefined;cartLoyaltyPoints=undefined;$('#cart-applied-vouchers').empty();enableCouponLink();});$('#cart-coupons-vouchers-close').click((e)=>{e.stopPropagation();$('#cart-coupons').hide();$('#cart-main-info').show();});function setCartSubTotal(){$('#cart-sub-total').html(`${cartCurrencyCode}${getCartSubTotal().toLocaleString("en")}`);}function getCartSubTotal(loyalty=false,coupon=false){let total=cartTotal;return total;}function setCartTotal(){$('#cart-total-price').html(`${cartCurrencyCode}${getCartTotal().toLocaleString("en")}`);}function getCartTotal(loyalty=false,coupon=false){let total=cartTotal+tax_amount;if(cartApplyLoyalty&&!loyalty)total-=cartLoyaltyDiscountApplied;if(cartAppliedCoupon&&!coupon)total-=cartCouponsList.get(cartAppliedCoupon).denomination;return total;}$(document).on('click','.cart-apply-coupon',(e)=>{const barCode=e.target.id;const voucher=cartCouponsList.get(barCode);const validCoupon=validateTotal(voucher.denomination,getCartTotal());if(validCoupon){disableCouponLink();cartAppliedCoupon=voucher.barCode;buildCouponsHtml();$('#cart-applied-vouchers').append(appliedCouponHtml(voucher));setAmountDetails();}});$(document).on('click','.cart-remove-coupon',()=>{cartAppliedCoupon=undefined;$('#cart-applied-vouchers').empty();enableCouponLink();setAmountDetails();});function appliedCouponHtml(voucher){if(voucher){let divId=`applied-coupon-${voucher.barCode}`;const offerText=`${getCurrencyCode(voucher.currency)} ${voucher.denomination.toLocaleString("en")} discount on the bill`;return `<div id=${divId} class="left">
                <div class="heading row align-center">
                  <h5 class="coupon">${voucher.barCode}</h5>
                  <a href="#" id="${voucher.barCode}" class="remove-link cart-remove-coupon">Remove</a>
                </div>
                <span>${offerText}</span>
              </div>`;}}function disableCouponLink(){$('#cart-show-coupons').addClass('anchor-disabled');}function enableCouponLink(){$('#cart-show-coupons').removeClass('anchor-disabled');}function validateTotal(amount,total){if(amount>total){toastr.error('Please add more items to apply this coupon');return false;}return true;}function getCart(){const localOrderId=localStorage.getItem('orderId');let queryParam;if(localOrderId)queryParam={order_id:parseInt(localOrderId,10)};$.ajax({dataType:'json',method:'GET',url:voucherCartUrl,beforeSend:function(){loaderStart();},complete:function(){loaderStop();},data:queryParam,headers:getHeaders(),success(data){if($.isEmptyObject(data)||(data&&data.order_items&&data.order_items.length===0))showEmptyCart();else{if(data&&data.order_items&&data.order_items.length>0){orderId=data.order_id;$('#cart-title').text(`My Cart (${data.order_items.length} Items)`);let cartItemsHtml='';if(!cartCurrency)cartCurrency=data.currency_code;if(!cartCurrencyCode)cartCurrencyCode=getCurrencyCode(cartCurrency);orderItems=[];data.order_items.forEach((item)=>{orderItems.push(new OrderItem(item));const unitPrice=`${cartCurrencyCode}${item.unit_price.toLocaleString("en")}`;const totalPrice=`${cartCurrencyCode}${item.total_price.toLocaleString("en")}`;cartQuantity=item.quantity;cartItemsHtml+=getCartItemHtml(item.image,item.title,unitPrice,totalPrice,item.product_id,cartQuantity);});taxes=data.taxes;$('#cart-items').html(cartItemsHtml);cartTotal=data.total_price;Moengage.track_event("Happinesscard_Checkout",{"Happiness_Card_Cart_Count":cartQuantity,"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Happiness_Cart_Checkout_Amount":cartTotal});if(isAnonymous())$('#cart-coupon-loyalty-points').hide();else getUserLoyaltyPoints();setAmountDetails();}}updateCartCount();}});}function calculateTaxAmount(){let totalTax=0;let taxHtml='';let amount=getCartSubTotal();if(taxes)taxes.forEach((tax)=>{const taxAmount=amount*tax.tax_percentage/100;taxHtml+=getTaxHtml(tax.tax,roundTaxAmount(taxAmount));totalTax+=taxAmount;});tax_amount=parseFloat(roundTaxAmount(totalTax));$('#cart-tax-details').html(taxHtml);}function roundTaxAmount(amount){return amount.toFixed(2);}function getTaxHtml(label,amount){return `<div class="gst">
              <h5>${label}</h5>
              <span>${cartCurrencyCode}${amount}</span>
            </div>`;}function showEmptyCart(){$('#cart-items-coupons-loyalty-total').hide();$('#cart-title').text('You have no items in your cart');}function getCartItemHtml(image,title,unitPrice,totalPrice,productId,quantity){return `<div id="cart-line-item-${productId}" class="cart__item">
            <img data-src="${image}" alt="V1" class="lazyload">
            <div class="cart__item__title">
                <h5>${title}</h5>
                <span>${unitPrice}</span>
            </div>
            <div class="cart__item__form-wrap">
                <form id="cart-voucher-${productId}" class="form form--cart">
                    <div class="value-button cart-decrease-item"></div>
                    <input class="voucher-quantity-${productId}" class="" type="text" class="number" value="${quantity}" readonly/>
                    <div class="value-button cart-increase-item"></div>
                </form>
            </div>
            <div id="cart-line-item-total-${productId}" class="cart__item__total">
                ${totalPrice.toLocaleString("en")}
            </div>
        </div>`;}function updateAllVouchers(items){if(items.length>0){orderItems=[];items.forEach((item)=>{orderItems.push(new OrderItem(item));const productId=item.product_id;const addToCartButton=$(`#add-to-cart-${productId}`);addToCartButton.next().show();addToCartButton.hide();const quantityElement=$(`.voucher-quantity-${productId}`);quantityElement.val(item.quantity);});updateCartCount();}}function voucherHttpRequest(url,requestMethod='GET',postData,populateAll,productId,isCart=false){$.ajax({dataType:'json',method:requestMethod,beforeSend:function(){loaderStart();},complete:function(){loaderStop();},url,data:populateAll?postData:JSON.stringify(postData),headers:getHeaders(),success(data){if(data.order_id)if(populateAll){orderId=data.order_id;updateAllVouchers(data.order_items);}else updateOrder(data,productId,isCart);}});}function redirectToVouchers(){setTimeout(function(){window.location.href='/profile#vouchers';},1000);}function updateOrder(data,isCart){if(!orderId){orderId=data.order_id;localStorage.setItem('orderId',orderId);}else localStorage.setItem('orderId',orderId);orderItems=[];$('#cart-total-price').html(`${cartCurrencyCode}${data.total_price.toLocaleString("en")}`);data.order_items.forEach((orderItem)=>{$(`.voucher-quantity-${orderItem.product_id}`).val(orderItem.quantity);if(isCart)$(`#cart-line-item-total-${orderItem.product_id}`).html(`${cartCurrencyCode}${orderItem.total_price}`);orderItems.push(new OrderItem(orderItem));});if(isCart){cartTotal=data.total_price;setAmountDetails();if(orderItems.length===0)showEmptyCart();else{$('#cart-title').text(`My Cart (${orderItems.length} Items)`);$('#cart-main-info').children().filter(':not(.cart__heading)').show();}}updateCartCount();}function getVoucherId(event,isCart=false){if(isCart)return parseInt($(event.target).closest('form').attr('id').substr(13),10);else return parseInt($(event.target).closest('article').attr('id'),10);}function addToCart(event,update=true,increase=true,isCart=false){const productId=getVoucherId(event,isCart);const quantityElement=$(`.voucher-quantity-${productId}`);let currentQuantity=parseInt(quantityElement.val(),10);if(increase){currentQuantity++;if(update){const orderItemId=orderItems.find((item)=>item.productId===productId).orderItemId;const body=new VoucherPostData(undefined,orderItemId,currentQuantity);voucherHttpRequest(voucherCartUrl,'PUT',body,false,productId,isCart);}else{const body=new VoucherPostData(productId,undefined,currentQuantity);voucherHttpRequest(voucherCartUrl,'POST',body,false,productId,isCart);}}else{let orderItemId;let unitPrice;for(let i=0;i<orderItems.length;i++)if(orderItems[i].productId===productId){orderItemId=orderItems[i].orderItemId;unitPrice=orderItems[i].unitPrice;}cartAppliedCoupon=undefined;$('#cart-applied-vouchers').empty();enableCouponLink();if(currentQuantity>1){currentQuantity--;const body=new VoucherPostData(undefined,orderItemId,currentQuantity);voucherHttpRequest(voucherCartUrl,'PUT',body,false,productId,isCart);}else{quantityElement.val(0);if(isVoucherPage()||isHomePage()||isVoucherDetailPage()){const addToCartButton=$(`#add-to-cart-${productId}`);addToCartButton.show();addToCartButton.next().hide();}if((isVoucherPage()||isHomePage()||isVoucherDetailPage())&&isCart){const addToCartButton=$(`#add-to-cart-${productId}`);addToCartButton.show();addToCartButton.next().hide();$(`#cart-line-item-${productId}`).remove();}else $(`#cart-line-item-${productId}`).remove();voucherHttpRequest(`${voucherCartUrl}/${orderId}/${orderItemId}`,'DELETE',undefined,false,productId,isCart);}}}$('.show-cart').click(function(e){$('.cart--curtain').addClass('cart--visible');e.preventDefault();getCart();});$(document).on('click','.button--atc',(e)=>{const addToCartButton=$(`#add-to-cart-${getVoucherId(e)}`);Moengage.track_event("Home_Happinesscard",{"Home_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email')});addToCartButton.next().show();addToCartButton.hide();addToCart(e,false);});$(document).on('click','.increase-item',(e)=>{var voucherVal=$(e.target).closest('.voucher--details').find('.voucher--details-title a').text();Moengage.track_event("Happinesscard_Added",{"Home_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Happiness_Card_Title_Name":voucherVal});addToCart(e);});$(document).on('click','.decrease-item',(e)=>{addToCart(e,true,false);});$(document).on('click','.cart-increase-item',(e)=>{var voucherVal=$(e.target).closest('.cart__item').find('.cart__item__title h5').text();Moengage.track_event("Happinesscard_Added",{"Home_Click_Count":"Clicked","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Happiness_Card_Title_Name":voucherVal});addToCart(e,true,true,true);});$(document).on('click','.cart-decrease-item',(e)=>{addToCart(e,true,false,true);});class VoucherPostData{constructor(productId,orderItemId,quantity){this.order_id=orderId?orderId:undefined;this.product_id=productId?productId:undefined;this.order_item_id=orderItemId?orderItemId:undefined;this.quantity=quantity;}}class OrderItem{constructor(orderItem){this.orderItemId=orderItem.order_item_id;this.quantity=orderItem.quantity;this.productId=orderItem.product_id;this.unitPrice=orderItem.unit_price;this.totalPrice=orderItem.total_price;}}function completeVoucherCheckout(data){$.ajax({method:'POST',url:checkoutUrl,data:JSON.stringify(data),beforeSend:function(){loaderStart();},complete:function(){loaderStop();},headers:getHeaders(),success(){showEmptyCart();toastr.success('Order Placed Successfully.');$('#cart-count').html(0);$('.cart--curtain').removeClass('cart--visible');Moengage.track_event("Happinesscard_Order_Status",{"Happiness_Card_Success":"Success","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email')});destroyCartLocalStorage();redirectToVouchers();},error(){toastr.error('We are unable to process your order now. Please contact 08035002040 for further assistance');Moengage.track_event("Happinesscard_Order_Status",{"Happiness_Card_Success":"Failure","Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Error":"We are unable to process your order now. Please contact 08035002040 for further assistance"});$(".cart--curtain .close").trigger("click");}});}function transactionCancelled(data){$.ajax({method:'POST',url:transactionCancelledUrl,data:JSON.stringify(data),headers:getHeaders()});}function destroyCartLocalStorage(){localStorage.removeItem('orderId');localStorage.removeItem('voucher-proceed-to-checkout');}function generateRazorpayOrder(){let discount=0;let bar_code=undefined;let loyalty_points=undefined;if(cartAppliedCoupon){bar_code=cartAppliedCoupon;discount+=cartCouponsList.get(cartAppliedCoupon).denomination;}if(cartApplyLoyalty){loyalty_points=cartLoyaltyPointsApplied;discount+=cartLoyaltyDiscountApplied;}if(discount===0)discount=undefined;$.ajax({dataType:'json',data:{discount,loyalty_points,bar_code},beforeSend:function(){loaderStart();},complete:function(){loaderStop();},url:generateRazorpayOrderUrl,headers:getHeaders(),success(data){proceedToVoucherCheckout(data);},error(data){toastr.error(data.responseJSON.fieldErrors[0].message);}});}$('#proceed-to-checkout').click(()=>{if(isAnonymous())$('.button--signin').trigger('click');else if(getCartTotal()>0)generateRazorpayOrder();else{let data={};if(cartApplyLoyalty)data.loyalty_points=cartLoyaltyPointsApplied;if(cartAppliedCoupon)data.bar_code=cartAppliedCoupon;if(data)completeVoucherCheckout(data);}});function loaderStop(){$('.fakeLoader').removeClass('display-block');$('.fakeLoader').addClass('hide');}function loaderStart(){$('.fakeLoader').removeClass('hide');$('.fakeLoader').addClass('display-block');}function proceedToVoucherCheckout(data){let quantity=0;for(let i=0;i<orderItems.length;i++)quantity+=parseInt(orderItems[i].quantity);Moengage.track_event("Happinesscard_Pay",{"Mobile_Number":localStorage.getItem('mobile_number'),"Login_Type":localStorage.getItem('email'),"Happiness_Cart_Checkout_Amount":getCartTotal()});const options={key:data.key,order_id:data.order_id,amount:data.amount,currency:data.currency,name:'Barbeque Nation',image:'/themes/custom/bbq_nation/assets/images/bbqn-logo.svg',handler:((transaction)=>{if(cartApplyLoyalty)transaction.loyalty_points=cartLoyaltyPointsApplied;if(cartAppliedCoupon)transaction.bar_code=cartAppliedCoupon;completeVoucherCheckout(transaction);}),prefill:{"contact":data.mobile_number,"email":data.email}};window.rzpay=new Razorpay(options);rzpay.on('payment.failed',(response)=>{transactionCancelled(response);});rzpay.open();}$(()=>{if(!isAnonymous())destroyCartLocalStorage();if(isVoucherPage()||isPromotionPage())buildIdQuery(1);if(isHomePage()||isVoucherDetailPage()||isVoucherPage())if(isHomePage()){const observerConfig={childList:true};const voucherBlock=document.getElementById('homepage-gift-vouchers');const observer=new MutationObserver(()=>{setInitialQuantity();observer.disconnect();});observer.observe(voucherBlock,observerConfig);}else setInitialQuantity();});$(document).on('click','.logout',()=>{destroyCartLocalStorage();});function enableFilterClearAllButton(){$('#clear-all-voucher-filters').show();}function disableFilterClearAllButton(){$('#clear-all-voucher-filters').hide();}function buildMultiOrSingleMatchQuery(ids,key){voucherFilterObject.page=0;const singleKey=`${key}.equals`;const multiKey=`${key}.in`;if(ids)if(key==='countryId'&&ids===0&&voucherFilterObject[singleKey])delete voucherFilterObject[singleKey];else if(key==='countryId')voucherFilterObject[singleKey]=ids;else if(voucherFilterObject[singleKey]===ids)delete voucherFilterObject[singleKey];else if(voucherFilterObject[multiKey]&&voucherFilterObject[multiKey].includes(ids)){const index=voucherFilterObject[multiKey].indexOf(ids);if(index>-1)voucherFilterObject[multiKey].splice(index,1);if(voucherFilterObject[multiKey].length===1){const value=voucherFilterObject[multiKey][0];delete voucherFilterObject[multiKey];voucherFilterObject[singleKey]=value;}}else if(voucherFilterObject[singleKey]){delete Object.assign(voucherFilterObject,{[multiKey]:voucherFilterObject[singleKey]})[singleKey];voucherFilterObject[multiKey]=[voucherFilterObject[multiKey]];voucherFilterObject[multiKey].push(ids);}else if(voucherFilterObject[multiKey])voucherFilterObject[multiKey].push(ids);else if(!Array.isArray(ids))voucherFilterObject[singleKey]=ids;else if(ids.length>1)voucherFilterObject[multiKey].push(ids.join());else voucherFilterObject[singleKey]=ids.join();}function buildPriceQuery(minPrice,maxPrice){voucherFilterObject.page=0;if(minPrice)voucherFilterObject['price.greaterThanOrEqual']=minPrice;if(maxPrice)voucherFilterObject['price.lessThanOrEqual']=maxPrice;}function buildIdQuery(countries,cities,branches){buildMultiOrSingleMatchQuery(countries,'countryId');buildMultiOrSingleMatchQuery(cities,'cityId');buildMultiOrSingleMatchQuery(branches,'branchId');}function buildAdditionFilterQuery(treatTypes,foodClassifications,dayOfWeeks,voucherTypes){buildMultiOrSingleMatchQuery(treatTypes,'treatType');buildMultiOrSingleMatchQuery(foodClassifications,'foodClassification');buildMultiOrSingleMatchQuery(dayOfWeeks,'weekDays');buildMultiOrSingleMatchQuery(voucherTypes,'voucherType');}function getCountryFilterList(){let countryOptions='';countryOptions+='<option value="0">Select a country</option>';voucherFilters.countries.forEach((country)=>{if(voucherFilterObject['countryId.equals']&&voucherFilterObject['countryId.equals']===country.country_id)countryOptions+=`<option value="${country.country_id}" selected>${country.country_name}</option>`;else countryOptions+=`<option value=${country.country_id}>${country.country_name}</option>`;});return countryOptions;}function getCityHtml(){`<div class="form-item__checkbox">
     <input id="city-${city.city_id}" type="checkbox" name="city" value="${city.city_id}" checked>
     <label for="city-${city.city_id}">${city.city_name}</label>
  </div>`;}function getCityFilterList(){let cityList='';voucherFilters.cities.forEach((city)=>{if((voucherFilterObject['cityId.in']&&voucherFilterObject['cityId.in'].includes(city.city_id))||(voucherFilterObject['cityId.equals']&&voucherFilterObject['cityId.equals']===city.city_id))cityList+=`<div class="form-item__checkbox">
                     <input id="city-${city.city_id}" type="checkbox" name="city" value="${city.city_id}" checked>
                     <label for="city-${city.city_id}">${city.city_name}</label>
                  </div>`;else cityList+=`<div class="form-item__checkbox">
                     <input id="city-${city.city_id}" type="checkbox" name="city" value="${city.city_id}">
                     <label for="city-${city.city_id}">${city.city_name}</label>
                  </div>`;});return cityList;}function getBranchFilterList(){let branchList='';voucherFilters.branches.forEach((branch)=>{if((voucherFilterObject['branchId.in']&&voucherFilterObject['branchId.in'].includes(branch.branch_id))||(voucherFilterObject['branchId.equals']&&voucherFilterObject['branchId.equals']===branch.branch_id))branchList+=`<div class="form-item__checkbox">
                        <input id="branch-${branch.branch_id}" type="checkbox" name="branch" value="${branch.branch_id}" checked>
                        <label for="branch-${branch.branch_id}">${branch.branch_name}</label>
                    </div>`;else branchList+=`<div class="form-item__checkbox">
                        <input id="branch-${branch.branch_id}" type="checkbox" name="branch" value="${branch.branch_id}">
                        <label for="branch-${branch.branch_id}">${branch.branch_name}</label>
                    </div>`;});return branchList;}function getAdditionFilterList(additionFilters,type){let additionFilterList='';additionFilters.forEach((filter)=>{if((voucherFilterObject[`${type}.in`]&&voucherFilterObject[`${type}.in`].includes(filter))||(voucherFilterObject[`${type}.equals`]&&voucherFilterObject[`${type}.equals`]===filter))additionFilterList+=`<div class="form-item__checkbox">
                                <input id="${type}-${filter}" type="checkbox" name=${type} value="${filter}" checked>
                                <label for="${type}-${filter}">${filter}</label>
                            </div>`;else additionFilterList+=`<div class="form-item__checkbox">
                                <input id="${type}-${filter}" type="checkbox" name=${type} value="${filter}">
                                <label for="${type}-${filter}">${filter}</label>
                            </div>`;});return additionFilterList;}function getWeekDayList(){let weekDayList='';voucherFilters.dayOfWeeks.forEach((dayOfWeek)=>{if((voucherFilterObject['weekDays.in']&&voucherFilterObject['weekDays.in'].includes(dayOfWeek))||(voucherFilterObject['weekDays.equals']&&voucherFilterObject['weekDays.equals']===dayOfWeek))weekDayList+=`<div class="form-item__checkbox">
                        <input id="${dayOfWeek}" type="checkbox" name="dayOfWeek" value="${dayOfWeek}" checked>
                        <label for="${dayOfWeek}">${dayOfWeek}</label>
                      </div>`;else weekDayList+=`<div class="form-item__checkbox">
                        <input id="${dayOfWeek}" type="checkbox" name="dayOfWeek" value="${dayOfWeek}">
                        <label for="${dayOfWeek}">${dayOfWeek}</label>
                      </div>`;});return weekDayList;}function buildVoucherCard(voucher){return `<article id="${voucher.voucher_id}" class="card card--voucher">
            <div class="card__media">
                <img data-src="${voucher.voucher_banner}" alt="Voucher" class="lazyload">
            </div>
            <div class="card__header">
                <div class="unit">${voucher.voucher_name}</div>
                <div class="price">${getCurrencyCode(voucher.currency_code)}${voucher.price.toLocaleString("en")}</div>
            </div>
            <div class="card__footer">
              <div class="atc">
                <a id="add-to-cart-${voucher.voucher_id}" class="button button--atc">Add to Cart</a>
                <div class="card__footer__form-wrap">
                    <div class="form form--atc">
                      <div class="value-button decrease-item">-</div>
                      <input type="text" class="voucher-quantity-${voucher.voucher_id} number" value="0" readonly/>
                      <div class="value-button increase-item">+</div>
                    </div>
                </div>
              </div>
              <div class="info">
                <a href="#" class="open-dialog">More info <span class="viewMore"></span></a>
              </div>
            </div>
          </article>`;}function buildPromotionCard(promotion){return `<article id="${promotion.promotion_id}" class="promotion-card">
            <div class="events--card" onclick = "window.location = '${promotion.promotion_url}'" >
            <div class="events--card-details">
              ${getDescriptionHtml(promotion.title,'events--card-details--title')}
              ${getDescriptionHtml(promotion.teaser_text_one,'events--card-details--bottom')}
              ${getDescriptionHtml(promotion.teaser_text_two,'events--card-details--description')}
            <div class="events--card-details--link">
            <a href="${promotion.promotion_url}" title="">
                More info
                <span class="viewMore"></span>
            </a>
            </div>
            </div>
            <div class="events--card-image">
            <img data-src="${promotion.teaser_banner}" alt="Voucher" class="lazyload">
            </div>
            </div>
           </article>`;}function getDescriptionHtml(text,className){if(text)return `<div class="${className}">
                ${text}
              </div>`;else return '';}function disableOrEnablePrice(){if(filterMinPriceSlider===filterMaxPriceSlider)$('#price-filter').closest('s-voucher__filter-elem-wrap').hide();else{const priceElement=$('#price-filter');if(priceElement.is(':hidden'))priceElement.show();}}function convertFilterObjectArrayValues(){const requestFilterObject={};if(voucherFilterObject['price.greaterThanOrEqual'])requestFilterObject['price.greaterThanOrEqual']=voucherFilterObject['price.greaterThanOrEqual'];if(voucherFilterObject['price.lessThanOrEqual'])requestFilterObject['price.lessThanOrEqual']=voucherFilterObject['price.lessThanOrEqual'];if(voucherFilterObject.sort)requestFilterObject.sort=voucherFilterObject.sort;if(voucherFilterObject.size)requestFilterObject.size=voucherFilterObject.size;if(voucherFilterObject.page)requestFilterObject.page=voucherFilterObject.page;if(voucherFilterObject['countryId.in'])requestFilterObject['countryId.in']=voucherFilterObject['countryId.in'].join();if(voucherFilterObject['countryId.equals'])requestFilterObject['countryId.equals']=voucherFilterObject['countryId.equals'];if(voucherFilterObject['cityId.in'])requestFilterObject['cityId.in']=voucherFilterObject['cityId.in'].join();if(voucherFilterObject['cityId.equals'])requestFilterObject['cityId.equals']=voucherFilterObject['cityId.equals'];if(voucherFilterObject['branchId.in'])requestFilterObject['branchId.in']=voucherFilterObject['branchId.in'].join();if(voucherFilterObject['branchId.equals'])requestFilterObject['branchId.equals']=voucherFilterObject['branchId.equals'];if(voucherFilterObject['treatType.in'])requestFilterObject['treatType.in']=voucherFilterObject['treatType.in'].join();if(voucherFilterObject['treatType.equals'])requestFilterObject['treatType.equals']=voucherFilterObject['treatType.equals'];if(voucherFilterObject['foodClassification.in'])requestFilterObject['foodClassification.in']=voucherFilterObject['foodClassification.in'].join();if(voucherFilterObject['foodClassification.equals'])requestFilterObject['foodClassification.equals']=voucherFilterObject['foodClassification.equals'];if(voucherFilterObject['weekDays.in'])requestFilterObject['weekDays.in']=voucherFilterObject['weekDays.in'].join();if(voucherFilterObject['weekDays.equals'])requestFilterObject['weekDays.equals']=voucherFilterObject['weekDays.equals'];if(voucherFilterObject['voucherType.in'])requestFilterObject['voucherType.in']=voucherFilterObject['voucherType.in'].join();if(voucherFilterObject['voucherType.equals'])requestFilterObject['voucherType.equals']=voucherFilterObject['voucherType.equals'];return requestFilterObject;}function emptyVoucherListing(){$('#voucher-list').empty();}function disableLoadMore(){$('#filter-load-more').hide();}function enableLoadMore(){$('#filter-load-more').show();}function mergeFilters(newFilters){const newMinPrice=newFilters.minPrice;const newMaxPrice=newFilters.maxPrice;if(newMinPrice<voucherFilters.minPrice)voucherFilters.minPrice=newMinPrice;if(newMaxPrice>voucherFilters.maxPrice)voucherFilters.maxPrice=newMaxPrice;if(voucherFilters.countries&&newFilters.countries){const countryIds=new Set(voucherFilters.countries.map((country)=>country.country_id));voucherFilters.countries=[...voucherFilters.countries,...newFilters.countries.filter((country)=>!countryIds.has(country.country_id))];voucherFilters.countries.sort((a,b)=>a.country_name.localeCompare(b.country_name));}if(voucherFilters.cities&&newFilters.cities){const cityIds=new Set(voucherFilters.cities.map((city)=>city.city_id));voucherFilters.cities=[...voucherFilters.cities,...newFilters.cities.filter((city)=>!cityIds.has(city.city_id))];voucherFilters.cities.sort((a,b)=>a.city_name.localeCompare(b.city_name));}if(voucherFilters.branches&&newFilters.branches){const branchIds=new Set(voucherFilters.branches.map((branch)=>branch.branch_id));voucherFilters.branches=[...voucherFilters.branches,...newFilters.branches.filter((branch)=>!branchIds.has(branch.branch_id))];voucherFilters.branches.sort((a,b)=>a.branch_name.localeCompare(b.branch_name));}if(voucherFilters.voucherTypes&&newFilters.voucherTypes){voucherFilters.voucherTypes=[...new Set([...voucherFilters.voucherTypes,...newFilters.voucherTypes])];voucherFilters.voucherTypes.sort();}if(voucherFilters.foodClassifications&&newFilters.foodClassifications){voucherFilters.foodClassifications=[...new Set([...voucherFilters.foodClassifications,...newFilters.foodClassifications])];voucherFilters.foodClassifications.sort();}if(voucherFilters.treatTypes&&newFilters.treatTypes){voucherFilters.treatTypes=[...new Set([...voucherFilters.treatTypes,...newFilters.treatTypes])];voucherFilters.treatTypes.sort();}if(voucherFilters.dayOfWeeks&&newFilters.dayOfWeeks)voucherFilters.dayOfWeeks=[...new Set([...voucherFilters.dayOfWeeks,...newFilters.dayOfWeeks])];}function buildFilter(filterData,updateStatus){if(updateStatus)mergeFilters(filterData);else voucherFilters=new VoucherFilter(filterData);if(!filterMinPriceSlider)filterMinPriceSlider=voucherFilters.minPrice;if(!filterMaxPriceSlider)filterMaxPriceSlider=voucherFilters.maxPrice;if(!filterSelectedMinPrice)filterSelectedMinPrice=voucherFilters.minPrice;if(!filterSelectedMaxPrice)filterSelectedMaxPrice=voucherFilters.maxPrice;const minPrice=$('#amount-min');const maxPrice=$('#amount-max');$('#price-range').slider({range:true,min:filterMinPriceSlider,max:filterMaxPriceSlider,values:[filterSelectedMinPrice,filterSelectedMaxPrice],slide(event,ui){minPrice.val(ui.values[0]);maxPrice.val(ui.values[1]);},stop(event,ui){filterSelectedMinPrice=ui.values[0];filterSelectedMaxPrice=ui.values[1];buildPriceQuery(filterSelectedMinPrice,filterSelectedMaxPrice);}});minPrice.val(filterSelectedMinPrice);maxPrice.val(filterSelectedMaxPrice);disableOrEnablePrice();if(voucherFilters.countries.length>0)$('#country-filter-dropdown').html(getCountryFilterList());else $('#country-filter-dropdown').closest('.s-voucher__filter-elem-wrap').hide();if(voucherFilters.cities.length>0)$('#city-filter-select').html(getCityFilterList());else $('#city-filter-select').closest('.s-voucher__filter-elem-wrap').hide();if(voucherFilters.branches.length>0)$('#branch-filter-select').html(getBranchFilterList());else $('#branch-filter-select').closest('.s-voucher__filter-elem-wrap').hide();if(voucherFilters.treatTypes.length>0)$('#treat-type-select').html(getAdditionFilterList(voucherFilters.treatTypes,'treatType'));else $('#treat-type-select').closest('.s-voucher__filter-elem-wrap').hide();if(voucherFilters.foodClassifications.length>0)$('#food-classification-select').html(getAdditionFilterList(voucherFilters.foodClassifications,'foodClassification'));else $('#food-classification-select').closest('.s-voucher__filter-elem-wrap').hide();if(voucherFilters.dayOfWeeks.length>0)$('#day-of-the-week-select').html(getWeekDayList());else $('#day-of-the-week-select').closest('.s-voucher__filter-elem-wrap').hide();if(voucherFilters.voucherTypes.length>0)$('#voucher-type-select').html(getAdditionFilterList(voucherFilters.voucherTypes,'voucherType'));else $('#voucher-type-select').closest('.s-voucher__filter-elem-wrap').hide();}function buildListing(data,updateStatus){const list=$('#voucher-list');if(!updateStatus)list.empty();if(isVoucherPage())data.forEach((voucher)=>{list.append(buildVoucherCard(voucher));});else{if(isPromotionPage())data.forEach((promotion)=>{list.append(buildPromotionCard(promotion));});}}$(document).on('click','.open-dialog',(e)=>{$.ajax({dataType:'json',beforeSend:function(){loaderStart();},complete:function(){loaderStop();},url:`${voucherDetailUrl}${getVoucherId(e)}`,headers:getHeaders(false),success(data){$('#dialog').html(voucherInfoHtml(data));}});});$(document).on('click','#close-voucher-dialog',(e)=>{$('#dialog').children().remove();e.preventDefault();});function voucherInfoHtml(data){return `<div class="overlay-wrapper">
              <div class="voucher-info overlay-content">
                <div class="info__header">
                  <h1>More Details About Voucher</h1>
                  <a href="#" id="close-voucher-dialog" class="close"></a>
                </div>
                <div class="info__content">
                  <div class="info">
                    <h3>Timings</h3>
                    <table id="voucher-detail-timing">${getTimingHtml(data.timings)}</table>
                  </div>
                  <div class="info">
                    <h3>Voucher Description</h3>
                    <div>${data.voucher_description}</div>
                  </div>
                  <div class="info">
                    <h3>Cancellation Policy</h3>
                    <div id="voucher-detail-cancellation-policy">${data.cancellation_policy}</div>
                  </div>
                  <div class="info">
                    <h3>Not valid on</h3>
                    <div class="info__valid-date">
                      <dl id="voucher-detail-not-valid-on">${notValidOnHtml(data.voucher_not_valid_on)}</dl>
                    </div>
                  </div>
                  <div class="info">
                    <h3>Use this within</h3>
                    <div id="voucher-detail-validity">${data.voucher_validity}</div>
                  </div>
                  <div class="info">
                    <h3>Things to remember</h3>
                    <div id="voucher-detail-terms-and-conditions">${data.terms_and_condition}</div>
                  </div>
                </div>
              </div>
        </div>`;}function notValidOnHtml(notValidOn){let notValidOnHtml='';if(notValidOn)notValidOn.forEach((day)=>{notValidOnHtml+=`<dt>${day}</dt>`;});return notValidOnHtml;}function getTimingHtml(timings){let timingHtml='';if(timings)timings.forEach((timing)=>{timingHtml+=`<tr>
                    <td>${timing.day}</td>
                    <td>${timing.time}</td>
                   </tr>`;});return timingHtml;}function getListingPage(updateStatus=false,setQuantity=false){let url;if(isVoucherPage())url=voucherListingUrl;else{if(isPromotionPage())url=promotionListingUrl;}$.ajax({dataType:'json',url,beforeSend:function(){loaderStart();},complete:function(){loaderStop();},data:convertFilterObjectArrayValues(),headers:{'BBQ-Search-Key':'fca2cd09af45d7872342a882f035a6e3'},success(vouchers){if(vouchers&&vouchers.content&&vouchers.content.length>0){showAllFilters();voucherTotalElements=vouchers.total_elements;voucherPageNumber=vouchers.page_number;voucherPageSize=vouchers.page_size;voucherCurrentPageLength=vouchers.content.length;if(voucherPageSize*(voucherPageNumber+1)<voucherTotalElements)enableLoadMore();else disableLoadMore();if(voucherFilterObject&&Object.keys(voucherFilterObject).length!==0)enableFilterClearAllButton();buildFilter(vouchers.filters,updateStatus);buildListing(vouchers.content,updateStatus);if(isVoucherPage())if(setQuantity)setInitialQuantity();}else{emptyVoucherListing();$('#price-filter').closest('.s-voucher__filter-elem-wrap').hide();$('#country-filter-dropdown').closest('.s-voucher__filter-elem-wrap').hide();$('#city-filter-select').closest('.s-voucher__filter-elem-wrap').hide();$('#branch-filter-select').closest('.s-voucher__filter-elem-wrap').hide();$('#treat-type-select').closest('.s-voucher__filter-elem-wrap').hide();$('#food-classification-select').closest('.s-voucher__filter-elem-wrap').hide();$('#day-of-the-week-select').closest('.s-voucher__filter-elem-wrap').hide();$('#voucher-type-select').closest('.s-voucher__filter-elem-wrap').hide();}}});}function showAllFilters(){$('#price-filter').closest('.s-voucher__filter-elem-wrap').show();$('#country-filter-dropdown').closest('.s-voucher__filter-elem-wrap').show();$('#city-filter-select').closest('.s-voucher__filter-elem-wrap').show();$('#branch-filter-select').closest('.s-voucher__filter-elem-wrap').show();$('#treat-type-select').closest('.s-voucher__filter-elem-wrap').show();$('#food-classification-select').closest('.s-voucher__filter-elem-wrap').show();$('#day-of-the-week-select').closest('.s-voucher__filter-elem-wrap').show();$('#voucher-type-select').closest('.s-voucher__filter-elem-wrap').show();}function setInitialQuantity(){const localOrderId=localStorage.getItem('orderId');if(localOrderId&&isAnonymous()){orderId=parseInt(localOrderId,10);voucherHttpRequest(voucherCartUrl,'GET',{order_id:orderId},true);}else{if(!isAnonymous())voucherHttpRequest(voucherCartUrl,'GET',undefined,true);}}$('#clear-all-voucher-filters').click(()=>{voucherFilterObject={};if(isPromotionPage())buildIdQuery(1);filterSelectedMinPrice=null;filterSelectedMaxPrice=null;disableFilterClearAllButton();});$('#country-filter-dropdown').change(()=>{buildIdQuery(parseInt($('#country-filter-dropdown option:selected').val(),10));});$('#city-filter-select').change((e)=>{buildIdQuery(null,parseInt($(`#${e.target.id}`).val(),10));});$('#branch-filter-select').change((e)=>{buildIdQuery(null,null,parseInt($(`#${e.target.id}`).val(),10));});$('#treat-type-select').change((e)=>{buildAdditionFilterQuery($(`#${e.target.id}`).val());});$('#food-classification-select').change((e)=>{buildAdditionFilterQuery(null,$(`#${e.target.id}`).val());});$('#day-of-the-week-select').change((e)=>{buildAdditionFilterQuery(null,null,$(`#${e.target.id}`).val());});$('#voucher-type-select').change((e)=>{buildAdditionFilterQuery(null,null,null,$(`#${e.target.id}`).val());});$('#amount-min').focusout((e)=>{const value=parseInt(e.target.value,10);if(value!==filterSelectedMinPrice){filterSelectedMinPrice=value;buildPriceQuery(filterSelectedMinPrice,filterSelectedMaxPrice);}});$('#amount-max').focusout((e)=>{const value=parseInt(e.target.value,10);if(value!==filterSelectedMaxPrice){filterSelectedMaxPrice=value;buildPriceQuery(filterSelectedMinPrice,filterSelectedMaxPrice);}});$('#voucher-filter-sort-dropdown').change(()=>{const sort=parseInt($('#voucher-filter-sort-dropdown option:selected').val(),10);if(sort===1){if(voucherFilterObject.page)voucherFilterObject.page=null;voucherFilterObject.sort='price';}else if(sort===2){if(voucherFilterObject.page)voucherFilterObject.page=null;voucherFilterObject.sort='price,desc';}else{if(sort===0){if(voucherFilterObject.page)voucherFilterObject.page=null;voucherFilterObject.sort=undefined;}}});$(document).on('click','.read-more-coupon-description',(e)=>{e.preventDefault();$.dialog({title:'Description',boxWidth:'30%',useBootstrap:false,content:$(e.currentTarget).attr('value')});});$('#filter-load-more-button').click(()=>{voucherFilterObject.page=voucherPageNumber+1;});class VoucherFilter{constructor(filter){this.countries=filter.countries;this.cities=filter.cities;this.branches=filter.branches;this.voucherTypes=filter.voucher_types;this.foodClassifications=filter.food_classifications;this.treatTypes=filter.treat_types;this.dayOfWeeks=filter.day_of_weeks;this.minPrice=filter.min_price;this.maxPrice=filter.max_price;}}})(jQuery,Drupal);function getCurrencyCode(currency){if(currency==='INR')return '&#8377;';return '&#8377;';}function isAnonymous(){return!userId||userId===0;}function getHeaders(){if(isAnonymous())return getAnonymousHeaders();else return{'Content-Type':'application/json'};}function getAnonymousHeaders(){return{'BBQ-Client-Id':clientId,'BBQ-Client-Secret':clientSecret,'Content-Type':'application/json'};}function getCouponDescription(text){if(text&&text.length>60)return `<div class="coupon-description">${text.substring(0,60)}...</div>
              <div class="coupon-link">
                <a class="read-more-coupon-description" href="#" value="${text}">Read More</a>
              </div>`;else return `<div class="coupon-description">${text}</div>`;};