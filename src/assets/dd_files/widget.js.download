"use strict";!function(p,v){var t,c,s,m,h,y,_,l,b,u,k,e,a,S,I,i,o,f,r,w,d,n,g=function(){};function x(){!function(){try{var t,e,n=v.getElementsByTagName("meta"),a=!1;for(t in n)if("viewport"==n[t].name&&n[t].content){a=!0;break}a||((e=v.createElement("meta")).name="viewport",e.id="_fibotalk_meta_",e.async=1,e.content="width=device-width, initial-scale=1, maximum-scale=1",v.head||v.appendChild("head"),v.head.appendChild(e))}catch(t){}}(),N(),function(e){if(i.forEach(function(t){v.cookie=t+"=null;Path=/;Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}),!p.XMLHttpRequest||!("hidden"in v||"webkitHidden"in v||"mozHidden"in v)||!("onvisibilitychange"in v||"webkitOnVisibilityChange"in v))return e("incompatible browser");if(function(){var t,e=["Google","Bing","Slurp","DuckDuck","Baidu","Yandex","GTmetrix","Yammer","\\+http"];for(t in e)if(new RegExp(e[t],"i").test(navigator.userAgent))return!0;return!1}())return e("its a bot");d=new XMLHttpRequest;var t=Z(y),n=V("local","grp"),a="";p._ft_&&p._ft_.rcl&&(a=p._ft_.rcl);var r=function(){try{var t,e,n=[],a=v.getElementsByTagName("script");for(t in a)a[t].src&&-1<a[t].src.indexOf(o)&&((e=tt(e=(e=a[t].src).slice(e.indexOf("?")+1))).rcl&&!n.includes(e.rcl)&&n.push(e.rcl));return n}catch(t){return[]}}();{if(1<r.length)return n=t=null,X("all",1);if(1==r.length&&a&&a!=r[0])return n=t=null,X("all",1)}r=r[0]||a;if(!r)return n=t=null,X("all",1);a=Z(k);n&&n.gid&&n.gid!=r?(n=t=null,X("all",1)):Date.now()-a>w.sessionGap&&(n=t=null,X("session"));if(t&&n&&n.gid)return e(null);E(r,function(t){e(t)})}(function(t){return t?X("all",!0):(Z(k)||Y(k,Date.now()),void function(t){lt(),O()?t(null):function(t){var e=U(30);if(!V("local","grp"))return t("no group data");var n={};p.fibotalkSettings&&!ut(p.fibotalkSettings)&&(n=p.fibotalkSettings);n.uid=e,ot(n),n.name||(n.name="visitor "+U(5));A(n),t(null)}(t)}(function(t){return t?X("all",!0):void function(t){if(function(){p.fibo=new g,Z(y)||(B(),j(),L());"onvisibilitychange"in v?v.onvisibilitychange=function(){j(!0)}:"webkitOnVisibilityChange"in v&&(v.webkitOnVisibilityChange=function(){j(!0)});(function(){var t=["a","button"],e=["fibotrack"];try{var n=V("local","grp").settings.tags||{};n.name&&n.name.length&&(t=t.concat(n.name));try{n.class&&n.class.length&&(e=e.concat(n.class))}catch(t){}try{if(n.id&&n.id.length)for(var a in n.id){var r=v.getElementById(n.id[a]);r&&r.addEventListener("click",q)}}catch(t){}}catch(t){}try{for(var a in t)for(var i=v.getElementsByTagName(t[a]),o=0;o<i.length;o++)i[o].addEventListener("click",q)}catch(t){}try{for(var a in e)for(i=v.getElementsByClassName(e[a]),o=0;o<i.length;o++)i[o].addEventListener("click",q)}catch(t){}})(),R("click",H),setInterval(L,w.timeInterval),R("beforeunload",M)}(),t.services.length)for(var e in t.services)switch(t.services[e]){case"chat":!function(){var t,e;v.getElementById(S)||(t=o+"/chat.html",(e=v.createElement("iframe")).setAttribute("id",S),e.setAttribute("src",t),e.setAttribute("style","height:0px; width:0px; border:0px; background: transparent; position: fixed;bottom: 10px;right: 10px;z-index: 9999999999;"),v.body.appendChild(e))}();break;case"announce":case"nps":!function(){var t,e;v.getElementById(I)||(t=o+"/billy.html",(e=v.createElement("iframe")).setAttribute("id",I),e.setAttribute("src",t),e.setAttribute("scrolling","no"),e.setAttribute("style","height:0px; width:0px; border:0px; position: fixed;z-index: 9999999999;"),v.body.appendChild(e))}()}}(V("local","grp"))}))})}function E(a,r){if(!a){var t=V("local","grp")||{};if(!(a=t.gid))return X("all",1)}rt({url:f+w.group,headers:{auth:a},method:"GET"},function(t,e){if(t)return r&&r(t),X("all");try{if(!e.grp)return r&&r("No data"),X("all");e.grp.gid=a,z("local","grp",e.grp,1),z("local","ua",e.ua||{},1);var n=Date.now()-e.ts;return n&&z("local","offset",n),void(r&&r(null))}catch(t){return void(r&&r(t))}})}function N(t){try{var e=T(v.referrer),n=tt(),a=V("local","grp")||{};if(a.sessRef||(a.sessRef=e||"none"),t||!a.initParams)for(var r in a.initParams=n||{},a.initParams)(i=r).includes("utm")||i.includes("fbclid")||i.includes("gclid")||delete a.initParams[r];z("local","grp",a)}catch(t){}var i}function T(e){try{return!e||at(e)?"":e=(e=-1<(e=e.toString()).indexOf("?")?e.slice(0,e.indexOf("?")):e)&&e.replace("http://","").replace("https://","").replace("www.","").split("/")[0]}catch(t){return e}}function O(){try{var t=Z(u);return t?JSON.parse(p.atob(t)):t}catch(t){return null}}function A(t,e,n){try{t=t||{};var a=O()||{};et(t,a);try{p.fibotalkSettings.user.userId&&et(p.fibotalkSettings.user,a),delete p.fibotalkSettings.user}catch(t){}try{p.fibotalkSettings.account.accountId&&(a.account=a.account||{},et(p.fibotalkSettings.account,a.account)),delete p.fibotalkSettings.account}catch(t){}try{et(p.fibotalkSettings,a)}catch(t){}ot(a),Y(u,p.btoa(JSON.stringify(a)),e),n||delete p.fibotalkSettings}catch(t){}}function B(){try{Y(y,U(w.sidLen)),Y(_,parseInt(Date.now()/1e3)),Y(l,0),Y(b,"",-1),Y(e,"",-1),Y(a,"",-1),G().setItem(m,!0),G().setItem(h,!0),F("local",w.resetVars),N(1),st("session_start")}catch(t){return}}function L(){try{var t=Z(k);Date.now()-t>w.heartBeat&&!ct()&&(p.navigator.sendBeacon||(K("session_alive"),w.heartBeat=w.heartBeat+w.hbInterval)),function(){var t=Z(b);try{t=JSON.parse(p.atob(t))}catch(t){return}t&&t.lastPage&&dt()!=t.lastPage&&(ct()||(C(t.lastPage),D({fn:K})))}();var e=G(),n=P();if(!n)return;n.length>r.eventBatch?e.removeItem(s):function(t){try{if(!(t&&Array.isArray(t)&&t.length))return;var e;e=(e=V("local","grp")).gid,rt({url:f+w.eventsSync,headers:{auth:e},method:"POST",qs:{gid:e},json:{events:t}},function(t,e){}),G().removeItem(s)}catch(t){return}}(n)}catch(t){return null}}function P(){try{var e=G().getItem(s),t=!1,n=V("local","grp");try{n.settings.clicks&&(t=!0)}catch(t){}for(var e=JSON.parse(e)||[],a=0;a<e.length;a++)try{"click_event"!=e[a].event||t||(e.splice(a,1),a--)}catch(t){e.splice(a,1),a--}return e}catch(t){return null}}function j(t){var e,n={};ct()?(t&&(n.reason="blur"),C(dt(),e={fn:K,params:n}),L()):(t&&(n.reason="focus"),e={fn:K,params:n},setTimeout(function(){D(e)},w.newTab))}function C(t,e){if(function(t,e){var n=function(){var t={};try{t=V("session","lastEvent")}catch(t){}return t||{}}();try{return n.event==t&&e&&e==n.val?!0:!1}catch(t){return!1}}("page_close",t))return null;t=t||dt();var n=(e=e||{fn:st}).params,a=e.noStorage,r=V("local","pageTs"),i="";r&&!Number.isNaN(r)&&(i=Date.now()-r);a=(0,e.fn)("page_close",t,n,{duration:i},a);return F("local","currPage"),J(),a||void 0}function D(t){var e=(t=t||{fn:st}).page||dt();if(n=e,a=V("local","currPage"),n!=a){J();var n=t.params,a={};try{a.pageLoadTime=p.performance.timing.domContentLoadedEventEnd-p.performance.timing.navigationStart}catch(t){}a=(0,t.fn)("page_open",e,n,a);return z("local","currPage",e),a}}function J(){z("local","pageTs",Date.now(),1)}function R(t,e){p.addEventListener(t,e)}function M(t){C(dt(),{fn:st,params:{reason:"tab close"},noStorage:!0});var e=P();if(e){var n=V("local","grp");if(!n)return X("all",1,1);n={events:e,gid:n.gid};p.navigator.sendBeacon(f+w.eventsSync,JSON.stringify(n)),F("local",s)}}function H(t){var e=["a","button"],n=["fibotrack"],a={};try{a=V("local","grp").settings.tags||{}}catch(t){a={}}try{a.name&&a.name.length&&(e=e.concat(a.name))}catch(t){}try{a.class&&a.class.length&&(n=n.concat(a.class))}catch(t){}try{var r=t.path||t.composedPath&&t.composedPath();for(i in r){if(r[i].localName&&e.includes(r[i].localName))return void q(t);try{for(var i in n)if(r[i].className.includes(n[i]))return void q(t)}catch(t){}try{if(a.id&&a.id.length&&a.id.includes(r[i].id))return q(t)}catch(t){}}var o=t.srcElement||o;if(-1<e.indexOf(o.localName))return void q(t);for(i in n)if(-1<o.className.indexOf(n[i]))return void q(t);if(a.id.includes(o.id))return q(t)}catch(t){}}function q(t){var e,t=t.srcElement,n={localName:t.localName||"-",id:t.id?"#"+t.id:"-",innerText:t.innerText||"-",baseURI:p.location.pathname||"-",className:t.className?"."+t.className:"-"};for(e in"-"!=n.innerText&&(n.innerText=n.innerText.trim(),n.innerText=n.innerText.replace(/\s\s+/g," "),100<n.innerText.length&&(n.innerText=n.innerText.substring(0,100)+"...")),n)at(n[e])&&(n[e]=JSON.stringify(n[e]));K("click_event",function(t){var e="";"-"!=t.innerText&&(e+=t.innerText);"-"!=t.localName&&(e+=" "+({a:"link"}[t.localName]||t.localName));"-"!=t.baseURI&&(e+=" on page "+t.baseURI);var n=!0;"-"!=t.id&&(e+=" with id "+t.id,"-"!=t.className&&(e+=" and class "+t.className,n=!1));n&&"-"!=t.className&&(e+=" with class "+t.className);try{e=e.trim()}catch(t){}return e}(n),{misc:{text:t.innerText||"-",page:p.location.pathname||"-",elType:t.localName||"-",html:function(t){try{return t.outerHTML}catch(t){return"-"}}(t)}})}function U(t){for(var e="",n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a=t;0<a;--a)e+=n[Math.floor(Math.random()*n.length)];return e}function G(t){return"session"==t?p.sessionStorage:p.localStorage}function V(t,e){try{var n=G(t).getItem(c),n=JSON.parse(n);return e?n[e]||null:n}catch(t){return null}}function W(){var t=V("local"),e=O();return t.user=e,t}function z(t,e,n,a){try{if("function"==typeof n||!n)return;var r=G(t),i=V(t);if(i=i||{},a)e?i[e]=n:i=n;else{if(!e)return!1;if(i[e]){if(Array.isArray(n)){if(!Array.isArray(i[e]))return;i[e]=i[e].concat(n)}if("object"==typeof n){if("object"!=typeof i)return!1;for(var o in n)n[o]&&(i[e][o]=n[o])}}else i[e]=n}return i=JSON.stringify(i),r.setItem(c,i),!0}catch(t){return null}}function X(t,e,n){try{switch(t){case"local":case"all":if(localStorage.removeItem(c),"local"==t)break;case"session":for(var a in sessionStorage.removeItem(c),i)Y(i[a],null,-1)}e&&localStorage.removeItem(s),n&&x()}catch(t){return null}}function F(t,e){var n=V(t=t||"local");if(n){if(Array.isArray(e))for(var a in e)delete n[e[a]];else{if(at(e))return;delete n[e]}z(t,null,n,1)}}function Y(t,e,n){try{var a=new Date,r="Expires=";n?(a.setTime(a.getTime()+24*n*60*60*1e3),r+=a.toUTCString()):r+="Session";var i,o=t+"="+e+";"+r+";path=/;",c=p.location.host.split(".");1==c.length?v.cookie=o:(v.cookie=o+";domain=."+c.slice(1).join("."),(i=Z(t))&&i==e||(v.cookie=o+";domain=."+p.location.host),(i=Z(t))&&i==e||(v.cookie=o))}catch(t){}}function Z(t){try{for(var e,n=t+"=",a=v.cookie.split(";"),r=0;r<a.length;r++){for(var i=a[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(n)){e=i.substring(n.length,i.length);break}}return e}catch(t){}return null}function K(t,e,n,a,r){var i=O();if(lt(),!i)return X("all",!0,1);var o=Date.now(),c=(c=Z(k))?parseInt(c):o;if(!(w.exceptionEvents.indexOf(t)<0&&o-c<w.eventGap)&&(!(o-c>w.awayTime)||(B(),D(),st(t,e,n,a),E(),r))){c=0;try{if(c=parseInt(Z(l)),(c=isNaN(c)?0:c)>w.maxEventsInSession&&(C(),B(),D(),st(t,e,n,a),E(),!r))return}catch(t){return c=0,void B()}!function(t){if(!p.fibotalkSettings)return!1;var e=p.fibotalkSettings.userId;p.fibotalkSettings.user&&(e=p.fibotalkSettings.user.userId||e);if(at(e))return!1;if(t.userId&&e&&t.userId!=e)return!0;try{var n=t.account.accountId,a=p.fibotalkSettings.account.accountId;if(at(a))return!1;if(n&&a&&n!=a)return!0}catch(t){}return!1}(i)?A():(C(),Y(u,null,-1),A({uid:U(w.uidLen)},null,1),B(),E(),D()),Q(),st(t,e,n,a),r&&L()}}function Q(){try{var t=Z(a),e=O(),n=null;if(e&&e.userId?n=e.userId:p.fibotalkSettings&&(p.fibotalkSettings.userId?n=p.fibotalkSettings.userId:p.fibotalkSettings.user&&p.fibotalkSettings.user.userId&&(n=p.fibotalkSettings.user.userId)),!n)return;if(at(n))return;n&&!t&&(A(),Y(a,1),st("login"))}catch(t){}}function $(t,e,n,a){var r=V("local","grp")||{},i=O()||{},o=V("local","offset")||0;try{if(!r.gid)return X("all",1,1);if(!i.uid)return X("all",1,1)}catch(t){return X("all",1,1)}var c=Z(y);c&&"undefined"!=c||B();c="";try{c=v.referrer}catch(t){}var s={event:t,gid:r.gid,uid:i.uid,val:e||"",page:p.location.pathname,sess:Z(y),"page#url":p.location.href,"device#screenWidth":p.screen.width,"device#screenHeight":p.screen.height,"page#title":p.document.title,userAgent:p.navigator.userAgent};try{var l=G("local").getItem(m),u=G("local").getItem(h);l&&(s.uiUpdate=!0,G("local").removeItem(m)),u&&(s.accUpdate=!0,G("local").removeItem(h))}catch(t){return null}if(r.sessRef&&(s.referrer=T(r.sessRef)),r.initParams)for(var f in s.custom=s.custom||{},r.initParams)s.custom[ft(f)]=r.initParams[f];c&&(-1<c.indexOf("?")&&(c=c.slice(0,c.indexOf("?"))),s.from=c);var d=function(t){try{var e=t.event,n=["click_event","page_open"],a=V("local","grp");if((n=a.journeyEvents&&Array.isArray(a.journeyEvents)?a.journeyEvents:n).indexOf(e)<0)return{};var r=Z(b);try{r=(r=JSON.parse(p.atob(r)))||{}}catch(t){r={}}if("page_open"==e){var i=r.lastPage;if(i&&i==t.val)return{};r.lastPage=t.val}r[e]=r[e]?r[e]+1:1,r.total=r.total?r.total+1:1;var o=p.btoa(JSON.stringify(r));return Y(b,o),{journeyIndex:r.total,eventIndex:r[e]}}catch(t){return{}}}(s);for(f in d)s[ft(f)]=d[f];if(n)for(var f in s.custom=s.custom||{},n)"object"==typeof n[f]?(-1<w.validParams.indexOf(f)&&nt(n[f])&&(s[ft(f)]=n[f]),delete n[f]):s.custom[ft(f)]=n[f];u=V("local","ua")||{},c=u.loc||{};delete u.loc,delete u.page,et(u,s),et(c,s),s.ts=Date.now();u=s.ts,c=Z(k);s.durDiff=c?u-c:0;c=Z(_);isNaN(c)||(c=parseInt(c)),s.sessDur=u/1e3-c,s.ts=s.ts-o;var g={user:"ui",account:"account"};if(i){for(var f in s.ui=s.ui||{},et(i,s.ui,!0),i)nt(i[f])&&f in g&&(s[g[f]]=s[g[f]]||{},et(i[f],s[g[f]],!0),delete i[f]);delete s.ui.uid}else s.ui={};if(s.account&&!s.account.accountId&&delete s.account,function(t){try{var e=V("local","grp");if(!e)return;var n,a=V("local","uSets")||{},r=a.features_used||{},i=e.feature||[];for(n in i)if(i[n].goals)for(var o in i[n].goals)("event"==i[n].goals[o].key&&t.event==i[n].goals[o].val||t.event==i[n].goals[o].key&&t.val==i[n].goals[o].val)&&(r[i[n].id]=!0);Object.keys(r).length&&(t.ui=t.ui||{},t.ui.features_used=r,a.features_used=r,z("local","uSets",a),v.getElementById(I).contentWindow.postMessage({type:"function",name:"runFlows",data:a},"*"))}catch(t){}}(s),function(t){try{O().name!=t.name&&v.getElementById(S).contentWindow.postMessage({type:"function",name:"sendUpdateUi",args:[t]},"*")}catch(t){}}(s.ui),a&&nt(a))for(var f in a)s[f]=a[f];return function(o){try{V("local","grp").settings.maps.web.forEach(function(t){var e=t.from.split("."),n=e.shift();if(e.length){for(var a,r=t.to.split("."),i=0;i<r.length-1;i++)o[r[i]]=o[r[i]]||{},o=o[r[i]];switch(t.to=r[r.length-1],n){case"window":for(var i in a=p,e)a=a[e[i]];break;case"cookie":a=Z(e.join("."))}if(a)return o[t.to]=function t(e,n){try{if(e){if(Array.isArray(e))e=e.concat(n);else if("object"==typeof e)for(var a in n)e[a]=t(e[a],n[a])}else e=n}catch(t){}return e}(o[t.to],a)}})}catch(t){}}(s),s}function tt(t){try{var e,n=p.location.search.slice(1),a=(n=t?t:n).split(/[?,&]+/),r={};for(e in a){var i=a[e].split("=");i[0]&&i[1]&&(r[i[0]]=i[1])}return r}catch(t){return{}}}function et(t,e,n){if(nt(e)&&nt(t))for(var a in t){var r;at(t[a])||(r=a,e[r=n?ft(a):r]=t[a])}}function nt(t){return!Array.isArray(t)&&"object"==typeof t}function at(t){return["function","object"].includes(typeof t)}function rt(t,n){if(!t.url||!t.method)return n("URL not provided");var e=t.url;if(t.qs&&nt(t.qs)){for(var a in e+="?",t.qs)e+=a+"="+t.qs[a]+"&";e=e.slice(0,-1)}if(d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.DONE){var t=d.status,e="";try{e=JSON.parse(d.responseText)}catch(t){return n("Bad response")}return 0===t||200<=t&&t<400?n(null,e.data):n(e.msg||t)}},d.open(t.method,e),d.setRequestHeader("Content-Type","application/json"),t.headers&&nt(t.headers))for(var a in t.headers)a&&t.headers[a]&&d.setRequestHeader(a,t.headers[a]);var r={};t.json&&(r=t.json),d.send(JSON.stringify(r))}function it(t,e){return!!nt(t)&&(et(t,v.getElementById(e).style),!0)}function ot(t){t.userType="visitor",(t.email||t.phone)&&(t.userType="lead"),t.userId&&(t.userType="user")}function ct(){return!!(v.hidden||v.webkitHidden||v.mozHidden)}function st(t,e,n,a,r){lt(),function(){try{if(!p.fibotalkSettings)return;var t=O(),e=p.fibotalkSettings.userId;if(at(e=p.fibotalkSettings.user?p.fibotalkSettings.user.userId||e:e))return;if(e&&!t.userId&&G("local").setItem(m,!0),!p.fibotalkSettings.account.accountId)return;if(t.account=t.account||{},at(p.fibotalkSettings.account.accountId))return;p.fibotalkSettings.account.accountId&&!t.account.accountId&&G("local").setItem(h,!0)}catch(t){}}();a=$(t,e,n,a);if(a){if(!r){var i,o=[];try{o=(i=G("local")).getItem(s),o=JSON.parse(o),Array.isArray(o)||(o=[])}catch(t){o=[]}o.push(a),o=JSON.stringify(o),i.setItem(s,o),Y(k,Date.now()),z("session","lastEvent",a,1)}o=parseInt(Z(l));isNaN(o)&&(o=0),Y(l,o+=1);try{v.getElementById(I).contentWindow.postMessage({type:"function",name:"checkStartRules",args:[a]},"*")}catch(t){}return a}}function lt(){if(!p.fibotalkSettings||ut(p.fibotalkSettings))try{if(p.dataLayer)for(var t in p.dataLayer)p.dataLayer[t].fibotalkSettings&&(p.fibotalkSettings=p.dataLayer[t].fibotalkSettings)}catch(t){}}function ut(t){return!Object.keys(t).length}function ft(t){return"string"==typeof t&&"$"==(t=t.replace(/\./g,"_"))[0]?"_"+t:t}function dt(){return p.location.href}function gt(){try{var t=v.createElement("meta");t.name="viewport",t.id="_fibotalk_meta_apple_",t.async=1,t.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",v.head||v.appendChild("head"),v.head.appendChild(t)}catch(t){}}function pt(){try{v.head.removeChild(v.getElementById("_fibotalk_meta_apple_"))}catch(t){}}function vt(t){var e={key:t,val:{}};return"function"==typeof p[t]?null:(nt(p[t])?et(p[t],e.val):e.val=p[t],e)}function mt(e){var n={};return e?(["page","website","deviceId","appVersion"].forEach(function(t){e[t]&&(n[t]=e[t])}),n):null}t=g,c="__ft__settings__",s="__ft__events__",m="__ft__uiupd__",h="__ft__accupd__",i=[y="__ft__sid__",_="__ft__sts__",l="__ft__ec__",b="__ft__jc__",e="__ft__seen__",a="__ft__log__",u="__ft__u__",k="__ft__ts__"],o="https://cdn.fibotalk.com",f="https://appsuite.fibotalk.com",r={key:50,eventBatch:25},w={sidLen:30,uidLen:30,sysEvents:["announcement_seen","annoucement_clicked","nps_submitted","nps_skipped","login","signup","page_open","page_close","session_start","session_alive","click_event"],validParams:["misc"],timeInterval:5e3,maxLoadTime:500,eventGap:50,newTab:100,exceptionEvents:["page_open","session_start","_page_open","_page_close"],heartBeat:3e4,hbInterval:3e4,ourFrames:[S="__ft__chatwindow__",I="__ft__billy__"],maxEventsInSession:500,sessionGap:36e5,awayTime:36e5,resetVars:["lastEventTs","pageTs"],group:"/apis/open/v1/get/group",eventsSync:"/apis/open/v1/events/sync",scriptId:"fibotalkScript"},d=null,n=setTimeout(function(){x()},w.maxLoadTime),p.onload=function(){clearTimeout(n),x()},t.prototype.setEvent=function(t,e,n,a){!function(t,e){if(!(t.length>r.key)){if(!e)return 1;if(!Array.isArray(e)&&"object"==typeof e){for(var n in e)if(n.length>r.key)return;return 1}}}(t,n)||(t=t.replace(/[^a-zA-Z0-9]/g,"_"),K(t=-1<w.sysEvents.indexOf(t)?"_"+t:t,JSON.stringify(e),n,mt(a)))},t.prototype.login=function(t,e){lt(),t&&(p.fibotalkSettings=t),Q()},t.prototype.signup=function(t,e){lt(),t&&(p.fibotalkSettings=t),K("signup",null,null,mt(e))},t.prototype.setUserInfo=function(t){lt(),t&&(p.fibotalkSettings=t)},t.prototype.open=function(t,e){if(e){if(!t.name||!t.type)return e(!0,!1);var n={messenger:S};if(!n[t.name])return e(!0,!1);try{return v.getElementById(n[t.name]).contentWindow.postMessage({function:"open",type:t.type},"*"),e(!1,!0)}catch(t){return e(!0,!1)}}},p.onmessage=function(t){try{if("function"!=t.data.type)return;e=t.data,n=t.data.id,!e.name||(a={getStorage:V,getCookie:Z,setStorage:z,resize:it,setEvent:K,getWindowVar:vt,addMobCompat:gt,removeMobCompat:pt,chatInit:W,windowOpen:p.open})[e.name]&&"function"==typeof a[e.name]&&(a=a[e.name].apply(null,e.args||[]),v.getElementById(n).contentWindow.postMessage({resp:a,function:e.name,identifier:e.identifier||""},"*"))}catch(t){return}var e,n,a}}(window,document);